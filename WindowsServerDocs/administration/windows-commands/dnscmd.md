---
title: Dnscmd
description: 'Tópico de comandos do Windows para * * * *- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: e7f31cb5-a426-4e25-b714-88712b8defd5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 494a371365e41f32c543cd0a18ca8a2d54da002b
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/27/2019
ms.locfileid: "71377676"
---
# <a name="dnscmd"></a>Dnscmd

>Aplica-se a: Windows Server (canal semestral), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Uma interface de linha de comando para gerenciar servidores DNS. Esse utilitário é útil para gerar scripts de arquivos em lote para ajudar a automatizar tarefas rotineiras de gerenciamento de DNS ou para executar uma instalação autônoma simples e configuração de novos servidores DNS em sua rede.  
## <a name="syntax"></a>Sintaxe  
```  
dnscmd <ServerName> <command> [<command parameters>]  
```  
## <a name="parameters"></a>Parâmetros  

|  Parâmetro   |                         Descrição                          |
|--------------|--------------------------------------------------------------|
| <ServerName> | O endereço IP ou nome de host de um servidor DNS remoto ou local. |

## <a name="commands"></a>Comandos  

|                       Comando                       |                                             Descrição                                              |
|-----------------------------------------------------|------------------------------------------------------------------------------------------------------|
|          [/AgeAllRecords do DNSCmd](#BKMK_1)           |                     Define a hora atual em todos os carimbos de data/hora em uma zona ou nó.                      |
|            [/ClearCache do DNSCmd](#BKMK_2)            |                                     Limpa o cache do servidor DNS.                                     |
|              [dnscmd/config](#BKMK_3)              |                             Redefine a configuração de zona ou servidor DNS.                             |
| [/CreateBuiltinDirectoryPartitions do DNSCmd](#BKMK_4) |                      cria as partições de diretório de aplicativo DNS interno.                      |
|     [/createdirectorypartition do DNSCmd](#BKMK_5)     |                            Cria uma partição de diretório de aplicativo DNS.                            |
|     [/deletedirectorypartition do DNSCmd](#BKMK_6)     |                            exclui uma partição de diretório de aplicativo DNS.                            |
|      [/directorypartitioninfo do DNSCmd](#BKMK_7)      |                    lista informações sobre uma partição de diretório de aplicativo DNS.                    |
|     [/enlistdirectorypartition do DNSCmd](#BKMK_8)     |          Adiciona um servidor DNS ao conjunto de replicação de uma partição de diretório de aplicativos DNS.          |
|     [/EnumDirectoryPartitions do DNSCmd](#BKMK_9)      |                     lista as partições de diretório de aplicativo DNS para um servidor.                     |
|           [/enumrecords do DNSCmd](#BKMK_10)           |                                lista os registros de recursos em uma zona.                                 |
|            [/enumzones do DNSCmd](#BKMK_11)            |                           lista as zonas hospedadas pelo servidor especificado.                            |
|         [/ExportSettings do DNSCmd](#BKMK_25a)         |                       Grava as informações de configuração do servidor em um arquivo de texto.                        |
|              [/info do DNSCmd](#BKMK_12)               |                                       Obtém informações do servidor.                                       |
|           [/ipvalidate do DNSCmd](#BKMK_29a)           |                                    Valida servidores DNS remotos.                                     |
|           [/nodedelete do DNSCmd](#BKMK_13)            |                              exclui todos os registros de um nó em uma zona.                               |
|            [/RecordAdd do DNSCmd](#BKMK_14)            |                                  Adiciona um registro de recurso a uma zona.                                   |
|          [/recorddelete do DNSCmd](#BKMK_15)           |                                Remove um registro de recurso de uma zona.                                |
|         [/ResetForwarders do DNSCmd](#BKMK_16)         |                            Define servidores DNS para encaminhar consultas recursivas.                            |
|      [/ResetListenAddresses do DNSCmd](#BKMK_17)       |                           Define os endereços IP do servidor para atender a solicitações DNS.                            |
|         [/startscavenging do DNSCmd](#BKMK_18)         |                                     Inicia a limpeza do servidor.                                     |
|           [/Statistics do DNSCmd](#BKMK_19)            |                              Consulta ou limpa os dados de estatísticas do servidor.                               |
|   [/unenlistdirectorypartition do DNSCmd](#BKMK_20)    |       Remove um servidor DNS do conjunto de replicação de uma partição de diretório de aplicativos DNS.        |
|         [/writebackfiles do DNSCmd](#BKMK_21)          |                             Salva todos os dados da zona ou da dica de raiz em um arquivo.                              |
|             [/ZoneAdd do DNSCmd](#BKMK_22)             |                                Cria uma nova zona no servidor DNS.                                 |
|  [/ZoneChangeDirectoryPartition do DNSCmd](#BKMK_23)   |                       altera a partição de diretório na qual uma zona reside.                       |
|           [/zonedelete do DNSCmd](#BKMK_24)            |                                 exclui uma zona do servidor DNS.                                  |
|           [/zoneexport do DNSCmd](#BKMK_25)            |                        Grava os registros de recurso de uma zona em um arquivo de texto.                         |
|            [/zoneinfo do DNSCmd](#BKMK_26)             |                                      Exibe informações de zona.                                      |
|            [/zonepause do DNSCmd](#BKMK_27)            |                                            pausa uma zona.                                            |
|            [/zoneprint do DNSCmd](#BKMK_28)            |                                  Exibe todos os registros na zona.                                   |
|           [/zonerefresh do DNSCmd](#BKMK_30)           |                     força uma atualização da zona secundária da zona mestra.                     |
|           [/ZoneReload do DNSCmd](#BKMK_31)            |                                  Recarrega uma zona de seu banco de dados.                                   |
|        [/ZoneResetMasters do DNSCmd](#BKMK_32)         |        altera os servidores mestres que fornecem informações de transferência de zona para uma zona secundária.        |
|    [/ZoneResetScavengeServers do DNSCmd](#BKMK_33)     |                            altera os servidores que podem eliminar uma zona.                             |
|      [/zoneresetsecondaries do DNSCmd](#BKMK_34)       |                               Redefine as informações secundárias de uma zona.                               |
|          [/zoneresettype do DNSCmd](#BKMK_29)          |                                        altera o tipo de zona.                                        |
|           [/zoneresume do DNSCmd](#BKMK_35)            |                                           Retoma uma zona.                                            |
|        [/zoneupdatefromds do DNSCmd](#BKMK_36)         | Atualiza uma zona integrada do Active Directory com dados dos serviços de domínio Active Directory (AD DS). |
|          [/zonewriteback do DNSCmd](#BKMK_37)          |                                      Salva dados de zona em um arquivo.                                      |

### <a name="BKMK_1"></a>/AgeAllRecords do DNSCmd  
Define a hora atual em um carimbo de data/hora nos registros de recursos em uma zona ou nó especificado em um servidor DNS.  
#### <a name="syntax"></a>Sintaxe  
```  
dnscmd [<ServerName>] /ageallrecords <ZoneName>[<NodeName>] | [/tree]|[/f]  
```  
#### <a name="parameters"></a>Parâmetros  
<ServerName><br/>Especifica o servidor DNS que o administrador planeja gerenciar, representado pelo endereço IP, FQDN (nome de domínio totalmente qualificado) ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/><ZoneName><br/>Especifica o FQDN da zona.<br/><NodeName><br/>Especifica um nó ou uma subárvore específica na zona. *NodeName* especifica o nó ou subárvore na zona usando o seguinte:<br/>-@ para zona raiz ou FQDN<br/>-O FQDN de um nó (o nome com um ponto (.) no final)<br/>-Um único rótulo para o nome relativo à raiz da zona<br/>/tree<br/>Especifica que todos os nós filho também recebem o carimbo de data/hora.<br/>/f<br/>Executa o comando sem pedir confirmação.<br/># # # # Comentários<br/>-O comando **AgeAllRecords** destina-se à compatibilidade com versões anteriores entre a versão atual do DNS e as versões antigas do DNS nas quais a duração e a eliminação não têm suporte. Ele adiciona um carimbo de data/hora com a hora atual aos registros de recursos que não têm um carimbo de data/hora e define a hora atual nos registros de recursos que têm um carimbo de data/hora.<br/>-A eliminação de registros não ocorre, a menos que os registros estejam com carimbo de data/hora. Registros de recursos de servidor de nomes (NS), registros de recursos de início de autoridade (SOA) e registros de recursos do WINS (serviço de cadastramento na Internet do Windows) não estão incluídos no processo de eliminação e não são marcados com o tempo mesmo quando o comando **AgeAllRecords** é executado.<br/>-Esse comando falha, a menos que a eliminação esteja habilitada para o servidor DNS e a zona. Para obter informações sobre como habilitar a eliminação para a zona, consulte o parâmetro **Aging** sob a sintaxe no nível da zona no comando <a href="#BKMK_3" data-raw-source="[config](#BKMK_3)">config</a> .<br/>-A adição de um carimbo de data/hora aos registros de recursos DNS os torna incompatíveis com os servidores DNS executados em sistemas operacionais diferentes do Windows 2000, Windows XP ou Windows Server 2003. Um carimbo de data/hora que você adiciona usando o comando **AgeAllRecords** não pode ser revertido.<br/>-Se nenhum dos parâmetros opcionais for especificado, o comando retornará todos os registros de recursos no nó especificado. Se um valor for especificado para pelo menos um dos parâmetros opcionais, o **dnscmd** enumerará somente os registros de recursos que correspondem ao valor ou aos valores especificados no parâmetro ou parâmetros opcionais.<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 1: Set the current time on a time stamp to resource records](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 1: Defina a hora atual em um carimbo de data/hora para registros de recursos @ no__t-0.<br/>### <a name="BKMK_2"></a>dnscmd/ClearCache<br/>Limpa a memória cache do DNS dos registros de recursos no servidor DNS especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /clearcache</code><br/># # # # Parâmetros<br/><ServerName><br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /clearcache</code><br/>### <a name="BKMK_3"></a>dnscmd/config<br/>altera os valores no registro para o servidor DNS e zonas individuais. Aceita configurações no nível do servidor e configurações de nível de zona.<br/>&gt; [!CAUTION]<br/>&gt; não edite o registro diretamente, a menos que você não tenha nenhuma alternativa. O editor do registro ignora as proteções padrão, permitindo que as configurações possam prejudicar o desempenho, danificar o sistema ou até mesmo exigir que você reinstale o Windows. Você pode alterar com segurança a maioria das configurações do registro usando os programas no painel de controle ou no console de gerenciamento Microsoft (MMC). Se você precisar editar o registro diretamente, faça o backup primeiro. Leia a ajuda do editor do registro para obter mais informações.<br/># # # # Sintaxe de nível de servidor<br/><code>dnscmd [&lt;ServerName&gt;] /config &lt;Parameter&gt;</code><br/># # # # dnscmd/config<br/>Modifica a configuração do servidor especificado.<br/># # # # Parâmetros<br/><ServerName><br/>Especifica o servidor DNS que você pretende gerenciar, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/><Parameter><br/>Especifique uma configuração e, como uma opção, um valor. Os valores de parâmetro usam esta sintaxe: *Parâmetro* [*valor*]<br/>Os seguintes valores de parâmetro são descritos no restante desta seção:<br/>-    **/addressanswerlimit**<br/>-    **/bindsecondaries**<br/>-    **/bootmethod**<br/>-    **/DefaultAgingState**<br/>-    **/DefaultNoRefreshInterval**<br/>-    **/DefaultRefreshInterval**<br/>-    **/disableautoreversezones**<br/>-    **/DisableNSRecordsAutoCreation**<br/>-    **/dspollinginterval**<br/>-    **/dstombstoneinterval**<br/>-    **/EDNSCacheTimeout**<br/>-    **/enablednsprobes**<br/>-    **/enablednssec**<br/>-    **/enableglobalnamessupport**<br/>-    **/enableglobalqueryblocklist**<br/>-    **/EventLogLevel**<br/>-    **/forwarddelegations**<br/>-    **/forwardingtimeout**<br/>-    **/globalnamesqueryorder**<br/>-    **/GlobalQueryBlockList**<br/>-    **/isslave**<br/>-    **/localnetpriority**<br/>-    **/LogFileMaxSize**<br/>-    **/logFilePath**<br/>-    **/logipfilterlist**<br/>-    **/logLevel**<br/>-    **/MaxCacheSize**<br/>-    **/MaxCacheTtl**<br/>-    **/namecheckflag**<br/>-    **/notcp**<br/>-    **/NoRecursion**<br/>-    **/recursionretry**<br/>-    **/recursiontimeout**<br/>-    **/RoundRobin**<br/>-    **/RpcProtocol**<br/>-    **/ScavengingInterval**<br/>-    **/secureresponses**<br/>-    **/sendport**<br/>-    **/strictfileparsing**<br/>-    **/UpdateOptions**<br/>-    **/writeauthorityns**<br/>-    **/xfrconnecttimeout**<br/>**/addressanswerlimit [0 | 5-28]**<br/>Especifica o número máximo de registros de host que um servidor DNS pode enviar em resposta a uma consulta. O valor pode ser zero (0) ou pode estar no intervalo de 5 a 28 registros. O valor padrão é zero (0).<br/>**/bindsecondaries [0 | 1]**<br/>altera o formato da transferência de zona para que ela possa atingir a máxima compactação e eficiência. No entanto, esse formato não é compatível com as versões anteriores do Berkeley Internet Name Domain (BIND).<br/>**0**<br/>Usa a compactação máxima. Esse formato é compatível com as versões de ligação 4.9.4 e posteriores apenas.<br/>**1**<br/>Envia apenas um registro de recurso por mensagem para servidores DNS que não são da Microsoft. Esse formato é compatível com as versões de ligação anteriores à 4.9.4. Essa é a configuração padrão.<br/>**/bootmethod [0 | 1 | 2 | 3]**<br/>Determina a origem da qual o servidor DNS obtém suas informações de configuração.<br/>**0**<br/>Limpa a fonte de informações de configuração.<br/>**1**<br/>Carrega do arquivo de associação que está localizado no diretório DNS, que é%systemroot%\System32\DNS por padrão.<br/>**2**<br/>Carrega do registro.<br/>**3**<br/>Carrega de AD DS e o registro. Essa é a configuração padrão.<br/>**/DefaultAgingState [0 | 1]**<br/>Determina se o recurso de limpeza de DNS está habilitado por padrão em zonas recém-criadas.<br/>**0**<br/>Desabilita a eliminação. Essa é a configuração padrão.<br/>**1**<br/>Habilita a eliminação.<br/>**/DefaultNoRefreshInterval [0x1-0xFFFFFFFF | 0xA8]**<br/>Define um período de tempo no qual nenhuma atualização é aceita para registros atualizados dinamicamente. As zonas no servidor herdam esse valor automaticamente. Para alterar o valor padrão, digite um valor no intervalo de **0x1-0xFFFFFFFF**. O valor padrão do servidor é **0xA8**.<br/>**/DefaultRefreshInterval [0x1-0xFFFFFFFF | 0xA8]**<br/>Define um período de tempo permitido para atualizações dinâmicas para registros DNS. As zonas no servidor herdam esse valor automaticamente. Para alterar o valor padrão, digite um valor no intervalo de **0x1-0xFFFFFFFF**. O valor padrão do servidor é **0xA8**.<br/>**/disableautoreversezones [0 | 1]**<br/>Habilita ou desabilita a criação automática de zonas de pesquisa inversa. As zonas de pesquisa inversa fornecem a resolução de endereços IP para nomes de domínio DNS.<br/>**0**<br/>Habilita a criação automática de zonas de pesquisa inversa. Essa é a configuração padrão.<br/>**1**<br/>Desabilita a criação automática de zonas de pesquisa inversa.<br/>**/DisableNSRecordsAutoCreation {0 | 1}**<br/>Especifica se o servidor DNS cria automaticamente registros de recurso de servidor de nome (NS) para as zonas que hospeda.<br/>**0**<br/>O cria automaticamente registros de recurso de servidor de nome (NS) para zonas que o servidor DNS hospeda.<br/>**1**<br/>Não cria automaticamente registros de recurso de servidor de nomes (NS) para zonas que o servidor DNS hospeda.<br/>**/dspollinginterval 0-30**<br/>Especifica com que frequência o servidor DNS sonda AD DS para alterações nas zonas integradas do Active Directory.<br/>**/dstombstoneinterval [1-30]**<br/>A quantidade de tempo, em segundos, para reter registros excluídos em AD DS.<br/>**/EDNSCacheTimeout [<seconds>]**<br/>Especifica o número de segundos que as informações de DNS estendido (EDNS) são armazenadas em cache. O valor mínimo é 3600 e o valor máximo é 15.724.800. O valor padrão é 604.800 segundos (uma semana).<br/>**/enableednsprobes {0 | 1}**<br/>Habilita ou desabilita o servidor para investigar outros servidores para determinar se eles dão suporte ao EDNS.<br/>**0**<br/>Desabilita o suporte ativo para investigações de EDNS.<br/>**1**<br/>Habilita o suporte ativo para investigações de EDNS.<br/>**/enablednssec {0 | 1}**<br/>Habilita ou desabilita o suporte para o DNSSEC (extensões de segurança do DNS).<br/>**0**<br/>Desabilita o DNSSEC.<br/>**1**<br/>Habilita o DNSSEC.<br/>**/enableglobalnamessupport {0 | 1}**<br/>Habilita ou desabilita o suporte para a zona GlobalNames. A zona GlobalNames dá suporte à resolução de nomes DNS de rótulo único em uma floresta.<br/>**0**<br/>Desabilita o suporte para a zona GlobalNames. Quando você define o valor desse comando como **0**, o serviço do servidor DNS não resolve nomes de rótulo único na zona GlobalNames.<br/>**1**<br/>Habilita o suporte para a zona GlobalNames. Quando você define o valor desse comando como **1**, o serviço do servidor DNS resolve nomes de rótulo único na zona GlobalNames.<br/>**/enableglobalqueryblocklist {0 | 1}**<br/>Habilita ou desabilita o suporte para a lista de blocos de consulta global que bloqueia a resolução de nomes de nome na lista. O serviço do servidor DNS cria e habilita a lista de blocos de consulta global por padrão quando o serviço é iniciado pela primeira vez. Para exibir a lista de blocos de consulta global atual, use o comando **dnscmd/info/GlobalQueryBlockList** .<br/>**0**<br/>Desabilita o suporte para a lista de blocos de consulta global. Quando você define o valor desse comando como **0**, o serviço do servidor DNS responde às consultas de nomes na lista de blocos.<br/>**1**<br/>Habilita o suporte para a lista de blocos de consulta global. Quando você define o valor desse comando como **1**, o serviço do servidor DNS não responde a consultas de nomes na lista de blocos.<br/>**/EventLogLevel [0 | 1 | 2 | 4]**<br/>Determina quais eventos são registrados no log do servidor DNS no Visualizador de Eventos.<br/>**0**<br/>Não registra nenhum evento.<br/>**1**<br/>Registra apenas erros.<br/>**2**<br/>Registra apenas erros e avisos.<br/>**4**<br/>Registra erros, avisos e eventos informativos. Essa é a configuração padrão.<br/>**/forwarddelegations [0 | 1]**<br/>Determina como o servidor DNS manipula uma consulta para uma subzona delegada. Essas consultas podem ser enviadas para a subzona que é referenciada na consulta ou à lista de encaminhadores que é nomeada para o servidor DNS. As entradas na configuração são usadas somente quando o encaminhamento está habilitado.<br/>**0**<br/>O envia automaticamente consultas que se referem a subzonas delegadas à subzona apropriada. Essa é a configuração padrão.<br/>**1**<br/>encaminha consultas que se referem à subzona delegada aos encaminhadores existentes.<br/>**/forwardingtimeout [<seconds>]**<br/>Determina por quantos segundos (0x1-0xFFFFFFFF) um servidor DNS aguarda um encaminhador responder antes de tentar outro encaminhador. O valor padrão é **0x5**, que é de 5 segundos.<br/>**/globalneamesqueryorder** {**0 | 1**}<br/>Especifica se o serviço do servidor DNS parece primeiro na zona GlobalNames ou nas zonas locais ao resolver nomes.<br/>**0**<br/>O serviço do servidor DNS tenta resolver nomes consultando a zona GlobalNames antes de consultar as zonas para as quais ele é autoritativo.<br/>**1**<br/>O serviço do servidor DNS tenta resolver nomes consultando as zonas para as quais ele é autoritativo antes de consultar a zona GlobalNames.<br/>**/GlobalQueryBlockList [[<name> [<name>]...]**<br/>Substitui a lista de blocos de consulta global atual por uma lista dos nomes que você especificar. Se você não especificar nenhum nome, esse comando limpará a lista de blocos. Por padrão, a lista de blocos de consulta global contém os seguintes itens:<br/>-ISATAP<br/>-WPAD<br/>O serviço do servidor DNS pode remover um ou ambos os nomes quando ele for iniciado pela primeira vez, se encontrar esses nomes em uma zona existente.<br/>**/isslave [0 | 1]**<br/>Determina como o servidor DNS responde quando as consultas que ele encaminha não recebem nenhuma resposta.<br/>**0**<br/>Especifica que o servidor DNS não é um subordinado (também conhecido como *escravo*). Se o encaminhador não responder, o servidor DNS tentará resolver a consulta em si. Essa é a configuração padrão.<br/>**1**<br/>Especifica que o servidor DNS é um subordinado. Se o encaminhador não responder, o servidor DNS finalizará a pesquisa e enviará uma mensagem de falha para o resolvedor.<br/>**/localnetpriority [0 | 1]**<br/>Determina a ordem na qual os registros de host são retornados quando o servidor DNS tem vários registros de host para o mesmo nome.<br/>**0**<br/>Retorna os registros na ordem em que estão listados no banco de dados DNS.<br/>**1**<br/>Retorna os registros que têm endereços de rede IP semelhantes primeiro. Essa é a configuração padrão.<br/>**/LogFileMaxSize [<size>]**<br/>Especifica o tamanho máximo em bytes (0x10000-0xFFFFFFFF) do arquivo DNS. log. Quando o arquivo atinge seu tamanho máximo, o DNS substitui os eventos mais antigos. O tamanho padrão é 0x400000, que é 4 megabytes (MB).<br/>**/LogFilePath [&lt;path + LogFilename @ no__t-2]**<br/>Especifica o caminho do arquivo DNS. log. O caminho padrão é%systemroot%\System32\Dns\Dns.log. Você pode especificar um caminho diferente usando o formato *caminho + LogFileName*.<br/>**/logipfilterlist <IPaddress> [, <IPaddress>...]**<br/>Especifica quais pacotes são registrados no arquivo de log de depuração. As entradas são uma lista de endereços IP. Somente os pacotes que vão para e para os endereços IP na lista são registrados.<br/>**/LogLevel [<Eventtype>]**<br/>Determina quais tipos de eventos são registrados no arquivo DNS. log. Cada tipo de evento é representado por um número hexadecimal. Se você quiser mais de um evento no log, use adição hexadecimal para adicionar os valores e, em seguida, insira a soma.<br/>**0x0**<br/>O servidor DNS não cria um log. Essa é a entrada padrão.<br/>**0x10**<br/>Registra consultas.<br/>**0x10**<br/>Registra notificações.<br/>**0x20**<br/>Registra atualizações.<br/>**0xFE**<br/>Registra transações de não consulta.<br/>**0x100**<br/>Registra transações de pergunta.<br/>**0x200**<br/>Respostas de logs.<br/>**0x1000**<br/>Os logs enviam pacotes.<br/>**0x2000**<br/>Os logs recebem pacotes.<br/>**0x4000**<br/>Registra pacotes UDP (User Datagram Protocol).<br/>**0x8000**<br/>Registra pacotes TCP (Transmission Control Protocol).<br/>**0xFFFF**<br/>Registra todos os pacotes.<br/>**0x10000**<br/>Registra transações de gravação do Active Directory.<br/>**0x20000**<br/>Registra transações de atualização do Active Directory.<br/>**0x1000000**<br/>Registra os pacotes completos.<br/>**0x80000000**<br/>Registra transações de write-through.<br/>**/maxcachesize**<br/>Especifica o tamanho máximo, em kilobytes (KB), do cache de memória s do servidor DNS.<br/>**/MaxCacheTtl [<seconds>]**<br/>Determina por quantos segundos (0x0-0xFFFFFFFF) um registro é salvo no cache. Se a configuração **0x0** for usada, o servidor DNS não armazenará em cache os registros. A configuração padrão é **0x15180** (86.400 segundos ou 1 dia).<br/>**/MaxNegativeCacheTtl [<seconds>]**<br/>Especifica o número de segundos (0x1-0xFFFFFFFF) que uma entrada que registra uma resposta negativa para uma consulta permanece armazenada no cache DNS. A configuração padrão é **0x384** (900 segundos).<br/>**/namecheckflag [0 | 1 | 2 | 3]**<br/>Especifica qual caractere padrão é usado ao verificar nomes DNS.<br/>**0**<br/>Usa caracteres ANSI que estão em conformidade com a solicitação de comentários (IETF) da Internet Engineering Task Force.<br/>**1**<br/>Usa caracteres ANSI que não necessariamente estão em conformidade com RFCs da IETF.<br/>**2**<br/>Usa caracteres de formato de transformação UCS de vários bytes 8 (UTF-8). Essa é a configuração padrão.<br/>**3**<br/>Usa todos os caracteres.<br/>**/NoRecursion [0 | 1]**<br/>Determina se um servidor DNS executa a resolução de nomes recursivos.<br/>**0**<br/>O servidor DNS executará a resolução de nomes recursiva se for solicitado em uma consulta. Essa é a configuração padrão.<br/>**1**<br/>O servidor DNS não executa a resolução de nome recursiva.<br/>**/notcp**<br/>Esse parâmetro é obsoleto e não tem efeito nas versões atuais do Windows Server.<br/>**/recursionretry [<seconds>]**<br/>Determina o número de segundos (0x1-0xFFFFFFFF) que um servidor DNS espera antes de tentar entrar novamente em contato com um servidor remoto. A configuração padrão é 0x3 (três segundos). Esse valor deve ser aumentado quando a recursão ocorre em um link de WAN (rede de longa distância) lento.<br/>**/recursiontimeout [<seconds>]**<br/>Determina o número de segundos (0x1-0xFFFFFFFF) que um servidor DNS espera antes de interromper as tentativas de entrar em contato com um servidor remoto. As configurações variam de **0x1** a **0xFFFFFFFF**. A configuração padrão é **0xF** (15 segundos). Esse valor deve ser aumentado quando a recursão ocorre em um link WAN lento.<br/>**/RoundRobin [0 | 1]**<br/>Determina a ordem na qual os registros de host são retornados quando um servidor tem vários registros de host para o mesmo nome.<br/>0<br/>O servidor DNS não usa round robin. Em vez disso, ele retorna o primeiro registro para cada consulta.<br/>**1**<br/>O servidor DNS gira entre os registros que ele retorna da parte superior para a parte inferior da lista de registros correspondentes. Essa é a configuração padrão.<br/>**/RpcProtocol [0x0 | 0x1 | 0x2 | 0x4 | 0xFFFFFFFF]**<br/>Especifica o protocolo que a chamada de procedimento remoto (RPC) usa quando faz uma conexão do servidor DNS.<br/>**0x0**<br/>Desabilita o RPC para DNS.<br/>**0x1**<br/>Usa TCP/IP.<br/>**0x2**<br/>Usa pipes nomeados.<br/>**0x4**<br/>Usa a LPC (chamada de procedimento local).<br/>**0xFFFFFFFF**<br/>Todos os protocolos. Essa é a configuração padrão.<br/>**/ScavengingInterval [<hours>]**<br/>Determina se o recurso de limpeza do servidor DNS está habilitado e define o número de horas (0x0-0xFFFFFFFF) entre os ciclos de eliminação. A configuração padrão é **0x0**, que desabilita a eliminação do servidor DNS. Uma configuração maior que **0x0** permite a eliminação do servidor e define o número de horas entre os ciclos de eliminação.<br/>**/secureresponses [0 | 1]**<br/>Determina se o DNS filtra os registros que são salvos em um cache.<br/>**0**<br/>Salva todas as respostas para consultas de nome em um cache. Essa é a configuração padrão.<br/>**1**<br/>Salva somente os registros que pertencem à mesma subárvore DNS a um cache.<br/>**/sendport [<port>]**<br/>Especifica o número da porta (0x0-0xFFFFFFFF) que o DNS usa para enviar consultas recursivas para outros servidores DNS. A configuração padrão é **0x0**, o que significa que o número da porta é selecionado aleatoriamente.<br/>**/serverlevelplugindll [<Dllpath>]**<br/>Especifica o caminho de um plug-in personalizado. Quando *DllPath* especifica o nome do caminho totalmente qualificado de um plug-in válido do servidor DNS, o servidor DNS chama funções no plug-in para resolver consultas de nome que estão fora do escopo de todas as zonas hospedadas localmente. Se um nome consultado estiver fora do escopo do plug-in, o servidor DNS executará a resolução de nomes usando encaminhamento ou recursão, conforme configurado. Se *DllPath* não for especificado, o servidor DNS deixará de usar um plug-in personalizado se um plug-in personalizado tiver sido configurado anteriormente.<br/>**/strictfileparsing [0 | 1]**<br/>Determina um comportamento do&#39;servidor DNS quando ele encontra um registro errôneo ao carregar uma zona.<br/>**0**<br/>O servidor DNS continua a carregar a zona, mesmo que o servidor encontre um registro errôneo. O erro é registrado no log DNS. Essa é a configuração padrão.<br/>**1**<br/>O servidor DNS para de carregar a zona e registra o erro no log DNS.<br/>**/UpdateOptions <RecordValue>**<br/>Proíbe atualizações dinâmicas de tipos especificados de registros. Se você quiser que mais de um tipo de registro seja proibido no log, use adição hexadecimal para adicionar os valores e, em seguida, insira a soma.<br/>**0x0**<br/>Não restringe nenhum tipo de registro.<br/>**0x1**<br/>Exclui registros de recursos de início de autoridade (SOA).<br/>**0x2**<br/>Exclui registros de recursos do servidor de nomes (NS).<br/>**0x4**<br/>Exclui a delegação de registros de recursos do servidor de nomes (NS).<br/>**0x8**<br/>Exclui os registros de host do servidor.<br/>**0x100**<br/>Durante a atualização dinâmica segura, o exclui registros de recursos de início de autoridade (SOA).<br/>**0x200**<br/>Durante a atualização dinâmica segura, o exclui os registros de recurso do servidor de nomes raiz (NS).<br/>**0x30F**<br/>Durante a atualização dinâmica padrão, o exclui os registros de recursos do servidor de nomes (NS), os registros de recursos do início de autoridade (SOA) e os registros de host do servidor. Durante a atualização dinâmica segura, o exclui os registros de recurso do servidor de nomes raiz (NS) e os registros de recurso de início de autoridade (SOA). Permite delegações e atualizações de host do servidor.<br/>**0x400**<br/>Durante a atualização dinâmica segura, o exclui os registros de recursos do servidor de nomes de delegação (NS).<br/>**0x800**<br/>Durante a atualização dinâmica segura, o exclui os registros de host do servidor.<br/>**0x1000000**<br/>Exclui registros de signatário (DS) de delegação.<br/>**0x80000000**<br/>Desabilita a atualização dinâmica do DNS.<br/>**/writeauthorityns [0 | 1]**<br/>Determina quando o servidor DNS grava os registros de recurso do servidor de nomes (NS) na seção autoridade de uma resposta.<br/>**0**<br/>Grava registros de recurso do servidor de nome (NS) na seção autoridade de referências. Essa configuração está em conformidade com RFC 1034, conceitos de nomes de domínio e instalações e com RFC 2181, esclarecimentos para a especificação de DNS. Essa é a configuração padrão.<br/>**1**<br/>Grava registros de recurso do servidor de nomes (NS) na seção autoridade de todas as respostas autoritativas bem-sucedidas.<br/>**/xfrconnecttimeout [<seconds>]**<br/>Determina o número de segundos (0x0-0xFFFFFFFF) que um servidor DNS primário aguarda uma resposta de transferência de seu servidor secundário. O valor padrão é **0x1E** (30 segundos). Depois que o valor de tempo limite expirar, a conexão será encerrada.<br/># # # # Sintaxe de nível de zona<br/><code>dnscmd /config &lt;Parameters&gt;</code><br/># # # # dnscmd/config<br/>Modifica a configuração da zona especificada.<br/># # # # Parâmetros<br/>**<Parameters>**<br/>Especifique uma configuração, um nome de zona e, como uma opção, um valor. Os valores de parâmetro usam esta sintaxe: *Parâmetro zonename* [*valor*]<br/>Os valores de parâmetro a seguir estão documentados no restante desta seção:<br/>-    **/Aging**<br/>-    **/allownsrecordsautocreation**<br/>-    **/AllowUpdate**<br/>-    **/forwarderslave**<br/>-    **/forwardertimeout**<br/>-    **/NoRefreshInterval**<br/>-    **/RefreshInterval**<br/>-    **/securesecondaries**<br/>**/Aging <ZoneName>**<br/>Habilita ou desabilita a limpeza em uma zona específica.<br/>**/allownsrecordsautocreation <ZoneName> [<Value>]**<br/>Substitui a configuração de&#39;autocriação de registro de recurso do servidor de nome do servidor DNS (ns). Os registros de recursos do servidor de nomes (NS) que foram registrados anteriormente para essa zona não são afetados. Portanto, você deve removê-los manualmente se não quiser.<br/>**/AllowUpdate <ZoneName>**<br/>Determina se a zona especificada aceita atualizações dinâmicas.<br/>**/forwarderslave <ZoneName>**<br/>Substitui a configuração de **/isslave** do servidor DNS.<br/>**/forwardertimeout <ZoneName>**<br/>Determina por quantos segundos uma zona DNS aguarda um encaminhador responder antes de tentar outro encaminhador. Esse valor substitui o valor definido no nível do servidor.<br/>**/NoRefreshInterval <ZoneName>**<br/>Define um intervalo de tempo para uma zona durante a qual nenhuma atualização pode atualizar dinamicamente os registros DNS em uma zona especificada.<br/>**/RefreshInterval <ZoneName>**<br/>Define um intervalo de tempo para uma zona durante a qual as atualizações podem atualizar dinamicamente os registros DNS em uma zona especificada.<br/>**/securesecondaries <ZoneName>**<br/>Determina quais servidores secundários podem receber atualizações de zona do servidor mestre para esta zona.<br/># # # # Comentários<br/>-O nome da zona deve ser especificado somente para parâmetros de nível de zona.<br/>### <a name="BKMK_4"></a>dnscmd/CreateBuiltinDirectoryPartitions<br/>Cria uma partição de diretório de aplicativo DNS. Quando o DNS é instalado, uma partição de diretório de aplicativo para o serviço é criada nos níveis de floresta e domínio. Use este comando para criar partições de diretório de aplicativo DNS que foram excluídas ou nunca criadas. Sem nenhum parâmetro, esse comando cria uma partição de diretório DNS interna para o domínio.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /createbuiltindirectorypartitions [/forest] [/alldomains]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**/Forest**<br/>Cria uma partição de diretório DNS para a floresta.<br/>**/alldomains**<br/>cria partições DNS para todos os domínios na floresta.<br/>### <a name="BKMK_5"></a>dnscmd/createdirectorypartition<br/>Cria uma partição de diretório de aplicativo DNS. Quando o DNS é instalado, uma partição de diretório de aplicativo para o serviço é criada nos níveis de floresta e domínio. Esta operação cria partições de diretório de aplicativo DNS adicionais.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /createdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<PartitionFQDN>**<br/>O FQDN da partição de diretório do aplicativo DNS que será criada.<br/>### <a name="BKMK_6"></a>dnscmd/deletedirectorypartition<br/>Remove uma partição de diretório de aplicativo DNS existente.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /deletedirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<PartitionFQDN>**<br/>O FQDN da partição de diretório do aplicativo DNS que será removida.<br/>### <a name="BKMK_7"></a>dnscmd/directorypartitioninfo<br/>lista informações sobre uma partição de diretório de aplicativo DNS especificada.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /directorypartitioninfo &lt;PartitionFQDN&gt; [/detail]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<PartitionFQDN>**<br/>O FQDN da partição de diretório do aplicativo DNS.<br/>**/Detail**<br/>lista todas as informações sobre a partição de diretório de aplicativos.<br/>### <a name="BKMK_8"></a>dnscmd/enlistdirectorypartition<br/>Adiciona o servidor DNS ao conjunto de réplicas&#39;s da partição de diretório especificada.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /enlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<PartitionFQDN>**<br/>O FQDN da partição de diretório do aplicativo DNS.<br/>### <a name="BKMK_9"></a>dnscmd/EnumDirectoryPartitions<br/>lista as partições de diretório de aplicativo DNS para o servidor especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /enumdirectorypartitions [/custom]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**/custom**<br/>lista somente partições de diretório criadas pelo usuário.<br/>### <a name="BKMK_10"></a>dnscmd/enumrecords<br/>lista os registros de recursos de um nó especificado em uma zona DNS.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /enumrecords &lt;ZoneName&gt; &lt;NodeName&gt; [/type &lt;RRtype&gt; &lt;Rrdata&gt;] [/authority] [/glue] [/additional] [/node | /child | /startchild&lt;ChildName&gt;] [/continue | /detail]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS que você planeja gerenciar, representado pelo endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**/enumrecords**<br/>lista os registros de recursos na zona especificada.<br/>**<ZoneName>**<br/>Especifica o nome da zona à qual os registros de recursos pertencem.<br/>**<NodeName>**<br/>Especifica o nome do nó dos registros de recursos.<br/>**/Type <RRtype> <Rrdata>**<br/>Especifica o tipo de registro de recurso a ser listado e o tipo de dados que é esperado:<br/>**<RRtype>**<br/>Especifica o tipo de registros de recursos a serem listados.<br/>**<Rrdata>**<br/>Especifica o tipo de dados que é o registro esperado.<br/>**/authority**<br/>Inclui dados autoritativos.<br/>**/glue**<br/>Inclui dados de cola.<br/>**/additional**<br/>Inclui todas as informações adicionais sobre os registros de recursos listados.<br/>**{/node |/Child |/startchild <ChildName>}**<br/>Filtra ou adiciona informações à exibição do registro de recurso:<br/>**/node**<br/>lista somente os registros de recursos do nó especificado.<br/>**/child**<br/>lista somente os registros de recursos de um domínio filho especificado.<br/>**/startchild <ChildName>**<br/>Inicia a lista no domínio filho especificado.<br/>**/Continue | /Detail**<br/>Especifica como os dados retornados são exibidos.<br/>**/continue**<br/>lista somente os registros de recursos com o tipo e os dados.<br/>**/Detail**<br/>lista todas as informações sobre os registros de recursos.<br/># # # # Uso de amostra<br/><code>dnscmd /enumrecords test.contoso.com test /additional</code><br/>### <a name="BKMK_11"></a>dnscmd/enumzones<br/>lista as zonas que existem no servidor DNS especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /enumzones [/primary | /secondary | /forwarder | /stub | /cache | /auto-created] [/forward | /reverse | /ds | /file] [/domaindirectorypartition | /forestdirectorypartition | /customdirectorypartition | /legacydirectorypartition | /directorypartition &lt;PartitionFQDN&gt;]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**/Primary | /Secondary | /forwarder | /stub | /cache | /auto-created**<br/>Filtra os tipos de zonas a serem exibidos:<br/>**/primary**<br/>lista todas as zonas que são zonas primárias padrão ou zonas integradas do Active Directory.<br/>**/secondary**<br/>lista todas as zonas secundárias padrão.<br/>**/forwarder**<br/>lista as zonas que encaminham consultas não resolvidas para outro servidor DNS.<br/>**/stub**<br/>lista todas as zonas de stub.<br/>**/cache**<br/>lista somente as zonas que são carregadas no cache.<br/>**/auto-created**<br/>lista as zonas que foram criadas automaticamente durante a instalação do servidor DNS.<br/>**/Forward | /Reverse | /DS | /File**<br/>Especifica filtros adicionais dos tipos de zonas a serem exibidos:<br/>**/forward**<br/>lista as zonas de pesquisa direta.<br/>**/reverse**<br/>lista as zonas de pesquisa inversa.<br/>**/DS**<br/>lista as zonas integradas do Active Directory.<br/>**/File**<br/>lista as zonas que são apoiadas por arquivos.<br/>**/domaindirectorypartition**<br/>lista as zonas que são armazenadas na partição de diretório de domínio.<br/>**/forestdirectorypartition**<br/>lista as zonas que são armazenadas na partição de diretório de aplicativos DNS da floresta.<br/>**/customdirectorypartition**<br/>lista todas as zonas que são armazenadas em uma partição de diretório de aplicativo definida pelo usuário.<br/>**/legacydirectorypartition**<br/>lista todas as zonas que estão armazenadas na partição de diretório de domínio.<br/>**/DirectoryPartition <PartitionFQDN>**<br/>lista todas as zonas que estão armazenadas na partição de diretório especificada.<br/># # # # Comentários<br/>-Os parâmetros **enumzones** atuam como filtros na lista de zonas. Se nenhum filtro for especificado, uma lista completa de zonas será retornada. Quando um filtro é especificado, somente as zonas que atendem aos&#39;critérios do filtro são incluídas na lista de zonas retornada.<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 2: Display a complete list of zones on a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 2: Exibir uma lista completa de zonas em um servidor DNS @ no__t-0 ou <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 3: Display a list of autocreated zones on a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 3: Exibir uma lista de zonas autocriadas em um servidor DNS @ no__t-0.<br/>### <a name="BKMK_25a"></a>dnscmd/ExportSettings<br/>Cria um arquivo de texto que lista os detalhes de configuração de um servidor DNS. O arquivo de texto é denominado DnsSettings. txt. Ele está localizado no diretório%systemroot%\System32\Dns do servidor.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /exportsettings</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/># # # # Comentários<br/>-Você pode usar as informações no arquivo que o **dnscmd/ExportSettings** cria para solucionar problemas de configuração ou para garantir que você tenha configurado vários servidores de forma idêntica.<br/>### <a name="BKMK_12"></a>dnscmd/info<br/>Exibe as configurações da seção DNS do registro do servidor especificado: **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters**<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /info [&lt;Setting&gt;]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<Setting>**<br/>Qualquer configuração que o comando **info** retorna pode ser especificada individualmente. Se uma configuração não for especificada, um relatório de configurações comuns será retornado.<br/># # # # Comentários<br/>-Este comando exibe as configurações do registro que estão no nível do servidor DNS. Para exibir as configurações do registro no nível da zona, use o comando <a href="#BKMK_26" data-raw-source="[zoneinfo](#BKMK_26)">zoneinfo</a> . Para ver uma lista de configurações que podem ser exibidas com esse comando, consulte a descrição da <a href="#BKMK_3" data-raw-source="[config](#BKMK_3)">configuração</a> .<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 4: Display the IsSlave setting from a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 4: Exiba a configuração isslave de um servidor DNS @ no__t-0 ou <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 5: Display the Recursiontimeout setting from a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 5: Exiba a configuração Recursiontimeout de um servidor DNS @ no__t-0.<br/>### <a name="BKMK_29a"></a>dnscmd/ipvalidate<br/>Testa se um endereço IP identifica um servidor DNS funcional ou se o servidor DNS pode atuar como encaminhador, um servidor de dica de raiz ou um servidor mestre para uma zona específica.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /ipvalidate &lt;Context&gt; [&lt;ZoneName&gt;] [[&lt;IPaddress&gt;]]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<Context>**<br/>Especifica o tipo de teste a ser executado. Você pode especificar qualquer um dos seguintes testes:<br/>-    **/dnsservers** testa se os computadores com os endereços especificados são servidores DNS em funcionamento.<br/>-    **/forwarders** testa se os endereços que você especifica identificam os servidores DNS que podem atuar como encaminhadores.<br/>-    **/roothints** testa se os endereços que você especificar identificam servidores DNS que podem atuar como servidores de nomes de dica de raiz.<br/>-    **/zonemasters** testa se os endereços que você especifica identificam servidores DNS que são servidores mestres para *zonename*.<br/>**<ZoneName>**<br/>Identifica a zona. Use esse parâmetro com o parâmetro **/zonemasters** .<br/>**<IPaddress>**<br/>Especifica os endereços IP que o comando testa.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /ipvalidate /dnsservers 10.0.0.1 10.0.0.2  
dnscmd dnssvr1.contoso.com /ipvalidate /zonemasters corp.contoso.com 10.0.0.2</pre><br/>### <a name="BKMK_13"></a>dnscmd/nodedelete<br/>exclui todos os registros de um host especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /nodedelete &lt;ZoneName&gt; &lt;NodeName&gt; [/tree] [/f]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona.<br/>**<NodeName>**<br/>Especifica o nome do host do nó a ser excluído.<br/>**/tree**<br/>exclui todos os registros filho.<br/>**f**<br/>executa o comando sem pedir confirmação.<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 6: delete the records from a node](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">o exemplo 6: excluir os registros de um nó</a>.<br/>### <a name="BKMK_14"></a>dnscmd/RecordAdd<br/>Adiciona um registro a uma zona especificada em um servidor DNS.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /recordadd &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica a zona na qual o registro reside.<br/>**<NodeName>**<br/>Especifica um nó específico na zona.<br/>**<RRtype>**<br/>Especifica o tipo de registro a ser adicionado.<br/>**<Rrdata>**<br/>Especifica o tipo de dados que é esperado.<br/>&gt; [!NOTE]<br/>&gt; ao adicionar um registro, certifique-se de usar o tipo de dados e o formato de dados corretos. Para obter uma lista de tipos de registro de recurso e os tipos de dados apropriados, consulte <a href="https://technet.microsoft.com/library/cc758321(v=ws.10).aspx" data-raw-source="[Resource records reference](https://technet.microsoft.com/library/cc758321(v=ws.10).aspx)">referência de registros de recursos</a>.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /recordadd test A 10.0.0.5  
dnscmd /recordadd test.contoso.com test MX 10 mailserver.test.contoso.com</pre><br/>### <a name="BKMK_15"></a>dnscmd/recorddelete<br/>exclui um registro de recurso de uma zona especificada.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /recorddelete &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;[/f]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica a zona na qual reside o registro de recurso.<br/>**<NodeName>**<br/>Especifica o nome do host.<br/>**<RRtype>**<br/>Especifica o tipo de registro de recurso a ser excluído.<br/>**<Rrdata>**<br/>Especifica o tipo de dados que é esperado.<br/>**f**<br/>executa o comando sem solicitar confirmação:<br/>-Como os nós podem ter mais de um registro de recurso, esse comando exige que você seja muito específico sobre o tipo de registro de recurso que deseja excluir.<br/>-Se você especificar um tipo de dados e não especificar um tipo de dados de registro de recurso, todos os registros com esse tipo de dados específico para o nó especificado serão excluídos.<br/># # # # Uso de amostra<br/><code>dnscmd /recorddelete test.contoso.com test MX 10 mailserver.test.contoso.com</code><br/>### <a name="BKMK_16"></a>dnscmd/ResetForwarders<br/>seleciona ou redefine os endereços IP para os quais o servidor DNS encaminha as consultas DNS quando ele não pode resolvê-las localmente.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /resetforwarders [&lt;IPaddress&gt; [,&lt;IPaddress&gt;]...][/timeout &lt;timeOut&gt;] [/slave|/noslave]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<IPaddress>**<br/>lista os endereços IP para os quais o servidor DNS encaminha consultas não resolvidas.<br/>**/Timeout <timeOut>**<br/>Define o número de segundos que o servidor DNS espera por uma resposta do encaminhador. Por padrão, esse valor é cinco segundos.<br/>**/Slave |/NoSlave**<br/>Determina se o servidor DNS executa suas próprias consultas iterativas se o encaminhador não resolver uma consulta:<br/>**/slave**<br/>Impede que o servidor DNS execute suas próprias consultas iterativas se o encaminhador falhar ao resolver uma consulta.<br/>**/noslave**<br/>Permite que o servidor DNS execute suas próprias consultas iterativas se o encaminhador não resolver uma consulta. Essa é a configuração padrão.<br/># # # # Comentários<br/>-Por padrão, um servidor DNS executa consultas iterativas quando ele não pode resolver uma consulta.<br/>-A configuração de endereços IP usando o comando **ResetForwarders** faz com que o servidor DNS execute consultas recursivas para os servidores DNS nos endereços IP especificados. Se os encaminhadores não resolverem a consulta, o servidor DNS poderá executar suas próprias consultas iterativas.<br/>-Se o parâmetro **/slave** for usado, o servidor DNS não executará suas próprias consultas iterativas. Isso significa que o servidor DNS encaminha consultas não resolvidas somente para os servidores DNS na lista e não tentará consultas iterativas se os encaminhadores não os resolverem. É mais eficiente definir um endereço IP como um encaminhador para um servidor DNS. Você pode usar o comando **ResetForwarders** para servidores internos em uma rede para encaminhar suas consultas não resolvidas para um servidor DNS que tenha uma conexão externa.<br/>-a listagem de um endereço IP do encaminhador duas vezes faz com que o servidor DNS tente encaminhar para esse servidor duas vezes.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /resetforwarders 10.0.0.1 /timeout 7 /slave  
dnscmd dnssvr1.contoso.com /resetforwarders /noslave</pre><br/>### <a name="BKMK_17"></a>dnscmd/ResetListenAddresses<br/>Especifica os endereços IP em um servidor que escuta solicitações de cliente DNS.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /resetlistenaddresses [&lt;listenaddress&gt;]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<listenaddress>**<br/>Especifica um endereço IP no servidor DNS que escuta solicitações de cliente DNS. Se nenhum endereço de escuta for especificado, todos os endereços IP no servidor escutarão as solicitações do cliente.<br/># # # # Comentários<br/>-Por padrão, todos os endereços IP em um servidor DNS escutam solicitações de DNS do cliente.<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /resetlistenaddresses 10.0.0.1</code><br/>### <a name="BKMK_18"></a>dnscmd/startscavenging<br/>Informa um servidor DNS para tentar uma pesquisa imediata de registros de recursos obsoletos em um servidor DNS especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /startscavenging</code><br/># # # # Parâmetro<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/># # # # Comentários<br/>-A conclusão bem-sucedida desse comando inicia uma limpeza imediatamente.<br/>-Embora o comando para iniciar a limpeza pareça ser concluído com êxito, a limpeza não é iniciada, a menos que as seguintes condições sejam atendidas:<br/>    -A eliminação é habilitada para o servidor e a zona.<br/>    -A zona é iniciada.<br/>    -Os registros de recurso têm um carimbo de data/hora.<br/>-para obter informações sobre como habilitar a eliminação para o servidor, consulte o parâmetro **ScavengingInterval** em sintaxe de nível de servidor na seção <a href="#BKMK_3" data-raw-source="[config](#BKMK_3)">configuração</a> .<br/>-para obter informações sobre como habilitar a eliminação para a zona, consulte o parâmetro **Aging** em sintaxe no nível da zona na seção <a href="#BKMK_3" data-raw-source="[config](#BKMK_3)">configuração</a> .<br/>-para obter informações sobre como iniciar uma zona que está em pausa, consulte a seção <a href="#BKMK_35" data-raw-source="[zoneresume](#BKMK_35)">zoneresume</a> .<br/>-para obter informações sobre como verificar registros de recursos para um carimbo de data/hora, consulte a seção <a href="#BKMK_1" data-raw-source="[ageallrecords](#BKMK_1)">AgeAllRecords</a> .<br/>-se a limpeza falhar, nenhuma mensagem de aviso será exibida.<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /startscavenging</code><br/>### <a name="BKMK_19"></a>dnscmd/Statistics<br/>Exibe ou limpa os dados de um servidor DNS especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /statistics [&lt;StatID&gt;] [/clear]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<StatID>**<br/>Especifica qual estatística ou combinação de estatísticas exibir. Um número de identificação é usado para identificar uma estatística. Se nenhum número de ID de estatística for especificado, todas as estatísticas serão exibidas.<br/>A seguir está uma lista de números que podem ser especificados e a estatística correspondente que exibe:<br/>**00000001**<br/>time<br/>**00000002**<br/>query<br/>**00000004**<br/>query2<br/>**00000008**<br/>Recurse<br/>**00000010**<br/>Mestre<br/>**00000020**<br/>Secundário<br/>**00000040**<br/>WINS<br/>**00000100**<br/>Atualização<br/>**00000200**<br/>SkwanSec<br/>**00000400**<br/>AD<br/>**00010000**<br/>Memória<br/>**00100000**<br/>PacketMem<br/>**00040000**<br/>DBASE<br/>**00080000**<br/>grava<br/>**00200000**<br/>NbstatMem<br/>**/Clear**<br/>Redefine o contador de estatísticas especificado como zero.<br/># # # # Comentários<br/>-O comando **Statistics** exibe os contadores que começam no servidor DNS quando ele é iniciado ou retomado.<br/># # # # Exemplos<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 7: Display time statistics for a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 7: Exibir estatísticas de tempo para um servidor DNS @ no__t-0 ou <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 8: Display NbstatMem statistics for a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 8: Exibir estatísticas de NbstatMem para um servidor DNS @ no__t-0.<br/>### <a name="BKMK_20"></a>dnscmd/unenlistdirectorypartition<br/>Remove o servidor DNS do conjunto de réplicas&#39;s de partição de diretório especificado.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /unenlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<PartitionFQDN>**<br/>O FQDN da partição de diretório do aplicativo DNS que será removida.<br/>### <a name="BKMK_21"></a>dnscmd/writebackfiles<br/>Verifica a memória do servidor DNS em busca de alterações e as grava no armazenamento persistente.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /writebackfiles [&lt;ZoneName&gt;]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser atualizada.<br/># # # # Comentários<br/>-O comando **writebackfiles** atualiza todas as zonas sujas ou uma zona especificada. Uma zona é suja quando há alterações na memória que ainda não foram gravadas no armazenamento persistente. Essa é uma operação em nível de servidor que verifica todas as zonas. Você pode especificar uma zona nesta operação ou pode usar a operação <a href="#BKMK_37" data-raw-source="[zonewriteback](#BKMK_37)">zonewriteback</a> .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /writebackfiles</code><br/>### <a name="BKMK_22"></a>dnscmd/ZoneAdd<br/>Adiciona uma zona ao servidor DNS.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneadd &lt;ZoneName&gt; &lt;Zonetype&gt; [/dp &lt;FQDN&gt;| {/domain|/enterprise|/legacy}]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona.<br/>**<Zonetype>**<br/>Especifica o tipo de zona a ser criada. Cada tipo de zona tem diferentes parâmetros necessários:<br/>**/dsprimary**<br/>Cria uma zona integrada do Active Directory.<br/>**/Primary/File <FileName>**<br/>Cria uma zona primária padrão e especifica o nome do arquivo que irá armazenar as informações de zona.<br/>**/Secondary <MasterIPaddress> [<MasterIPaddress>...]**<br/>Cria uma zona secundária padrão.<br/>**/stub <MasterIPaddress> [<MasterIPaddress>...]/file <FileName>**<br/>Cria uma zona de stub com backup em arquivo.<br/>**/DsStub <MasterIPaddress> [<MasterIPaddress>...]**<br/>Cria uma zona de stub integrada do Active Directory.<br/>**/forwarder <MasterIPaddress> [<MasterIPaddress>].../File <FileName>**<br/>Especifica que a zona criada encaminha consultas não resolvidas para outro servidor DNS.<br/>**/dsforwarder**<br/>Especifica que a zona integrada do Active Directory criada encaminha consultas não resolvidas para outro servidor DNS.<br/>**/DP <FQDN> {/Domain |/Enterprise |/Legacy}**<br/>Especifica a partição de diretório na qual armazenar a zona.<br/>**<FQDN>**<br/>Especifica o FQDN da partição de diretório.<br/>**/Domain**<br/>Armazena a zona na partição de diretório de domínio.<br/>**/enterprise**<br/>Armazena a zona na partição de diretório empresarial.<br/>**/legacy**<br/>Armazena a zona em uma partição de diretório herdada.<br/># # # # Comentários<br/>-A especificação de um tipo de zona de **/forwarder** ou **/DsForwarder** cria uma zona que executa o encaminhamento condicional.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /zoneadd test.contoso.com /dsprimary  
dnscmd dnssvr1.contoso.com /zoneadd secondtest.contoso.com /secondary 10.0.0.2</pre><br/>### <a name="BKMK_23"></a>dnscmd/ZoneChangeDirectoryPartition<br/>altera a partição de diretório na qual a zona especificada reside.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zonechangedirectorypartition &lt;ZoneName&gt;] {[&lt;NewPartitionName&gt;] | [&lt;Zonetype&gt;] }</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>O FQDN da partição de diretório atual na qual a zona reside.<br/>**<NewPartitionName>**<br/>O FQDN da partição de diretório para a qual a zona será movida.<br/>**<Zonetype>**<br/>Especifica o tipo de partição de diretório para a qual a zona será movida.<br/>**/Domain**<br/>move a zona para a partição de diretório de domínio interna.<br/>**/Forest**<br/>move a zona para a partição de diretório de floresta interna.<br/>**/legacy**<br/>move a zona para a partição de diretório que é criada para controladores de domínio anteriores do Active Directory. Essas partições de diretório não são necessárias para o modo nativo.<br/>### <a name="BKMK_24"></a>dnscmd/zonedelete<br/>exclui uma zona especificada.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zonedelete &lt;ZoneName&gt; [/dsdel] [/f]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser excluída.<br/>**/dsdel**<br/>exclui a zona de AD DS.<br/>**f**<br/>Executa o comando sem pedir confirmação.<br/># # # # Exemplo<br/>Consulte o <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 9: delete a zone from a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">exemplo 9: excluir uma zona de um servidor DNS</a>.<br/>### <a name="BKMK_25"></a>dnscmd/zoneexport<br/>Cria um arquivo de texto que lista os registros de recursos de uma zona especificada.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneexport &lt;ZoneName&gt; &lt;ZoneExportFile&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona.<br/>**<ZoneExportFile>**<br/>Especifica o nome do arquivo a ser criado.<br/># # # # Comentários<br/>-A operação **zoneexport** cria um arquivo de registros de recursos para uma zona integrada do Active Directory para fins de solução de problemas. Por padrão, o arquivo que esse comando cria é colocado no diretório DNS, que é, por padrão, o diretório% SystemRoot%/System32/Dns<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 10: Export zone resource records list to a file](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 10: Exportar a lista de registros de recursos de zona para um arquivo @ no__t-0.<br/>### <a name="BKMK_26"></a>dnscmd/zoneinfo<br/>Exibe as configurações da seção do registro da zona especificada: **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters\Zones @ no__t-1ZoneName >**<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneinfo &lt;ZoneName&gt;  [&lt;Setting&gt;]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona.<br/>**<Setting>**<br/>Você pode especificar individualmente qualquer configuração que o comando **zoneinfo** retornar. Se você não especificar uma configuração, todas as configurações serão retornadas.<br/># # # # Comentários<br/>-O comando **zoneinfo** exibe as configurações do registro que estão no nível de zona DNS em **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters\Zones @ no__t-2ZoneName >** .<br/>-Para exibir as configurações do registro no nível do servidor, use o comando <a href="#BKMK_12" data-raw-source="[info](#BKMK_12)">info</a> .<br/>-Para ver uma lista de configurações que você pode exibir com este comando, consulte o comando <a href="#BKMK_3" data-raw-source="[config](#BKMK_3)">config</a> .<br/># # # # Exemplo<br/>Consulte <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 11: Display RefreshInterval setting from the registry](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 11: Exiba a configuração RefreshInterval do registro @ no__t-0 ou <a href="https://technet.microsoft.com/library/cc784399(v=ws.10).aspx" data-raw-source="[Example 12: Display Aging setting from the registry](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)">Example 12: Exiba a configuração de vencimento do registro @ no__t-0.<br/>### <a name="BKMK_27"></a>dnscmd/zonepause<br/>pausa a zona especificada, que, em seguida, ignora as solicitações de consulta.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zonepause &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser pausada.<br/># # # # Comentários<br/>-Para retomar uma zona e torná-la disponível depois que ela tiver sido pausada, use o comando <a href="#BKMK_35" data-raw-source="[zoneresume](#BKMK_35)">zoneresume</a> .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zonepause test.contoso.com</code><br/>### <a name="BKMK_28"></a>dnscmd/zoneprint<br/>lista os registros em uma zona.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneprint &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Identifica a zona a ser listada.<br/>### <a name="BKMK_30"></a>dnscmd/zonerefresh<br/>força uma zona DNS secundária a atualizar a partir da zona mestre.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zonerefresh &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser atualizada.<br/># # # # Comentários<br/>-O comando **zonerefresh** força uma verificação do número de versão no registro de recurso de início de autoridade (SOA) do servidor mestre. Se o número de versão no servidor mestre for maior que o número de&#39;versão do servidor secundário, será iniciada uma transferência de zona que atualiza o servidor secundário. Se o número de versão for o mesmo, nenhuma transferência de zona ocorrerá.<br/>-A verificação forçada ocorre por padrão a cada 15 minutos. Para alterar o padrão, use o comando **dnscmd config RefreshInterval** .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zonerefresh test.contoso.com</code><br/>### <a name="BKMK_31"></a>dnscmd/ZoneReload<br/>Copia informações de zona de sua origem.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zonereload &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser recarregada.<br/># # # # Comentários<br/>-se a zona estiver integrada ao Active Directory, ela será recarregada de AD DS.<br/>-se a zona for uma zona com backup em arquivo padrão, ela será recarregada de um arquivo.<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zonereload test.contoso.com</code><br/>### <a name="BKMK_32"></a>dnscmd/ZoneResetMasters<br/>Redefine os endereços IP do servidor mestre que fornece informações de transferência de zona para uma zona secundária.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zoneresetmasters &lt;ZoneName&gt; [/local] [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser recarregada.<br/>**/local**<br/>Define uma lista mestra local. Esse parâmetro é usado para zonas integradas ao Active Directory.<br/>**<IPaddress>**<br/>Os endereços IP dos servidores mestres da zona secundária.<br/># # # # Comentários<br/>-Esse valor é originalmente definido quando a zona secundária é criada. Use o comando **ZoneResetMasters** no servidor secundário. Esse valor não terá nenhum efeito se estiver definido no servidor DNS mestre.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com 10.0.0.1  
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com /local</pre><br/>### <a name="BKMK_33"></a>dnscmd/ZoneResetScavengeServers<br/>altera os endereços IP dos servidores que podem recuperar a zona especificada.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetscavengeservers &lt;ZoneName&gt; [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Identifica a zona a ser reparada.<br/>**<IPaddress>**<br/>lista os endereços IP dos servidores que podem executar a limpeza. Se esse parâmetro for omitido, todos os servidores que hospedam essa zona poderão eliminá-lo.<br/># # # # Comentários<br/>-Por padrão, todos os servidores que hospedam uma zona podem recuperar essa zona.<br/>-se uma zona estiver hospedada em mais de um servidor DNS, você poderá usar esse comando para reduzir o número de vezes que uma zona é recuperada.<br/>-A eliminação deve ser habilitada no servidor DNS e na zona afetada por esse comando.<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zoneresetscavengeservers test.contoso.com 10.0.0.1 10.0.0.2</code><br/>### <a name="BKMK_34"></a>dnscmd/zoneresetsecondaries<br/>Especifica uma lista de endereços IP de servidores secundários para os quais um servidor mestre responde quando é solicitado uma transferência de zona.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetsecondaries &lt;ZoneName&gt; {/noxfr | /nonsecure | /securens | /securelist &lt;SecurityIPaddresses&gt;} {/nonotify | /notify | /notifylist &lt;NotifyIPaddresses&gt;}</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se o parâmetro is for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona que terá seus servidores secundários redefinidos.<br/>**/NoXfr | /nonsecure | /securens | /Securelist <SecurityIPaddresses>**<br/>Especifica se todos ou apenas alguns dos servidores secundários que solicitam uma atualização obtêm uma atualização.<br/>**/noxfr**<br/>Especifica que nenhuma transferência de zona é permitida.<br/>**/nonsecure**<br/>Especifica que todas as solicitações de transferência de zona são concedidas.<br/>**/securens**<br/>Especifica que somente o servidor listado no registro de recurso do servidor de nomes (NS) para a zona recebe uma transferência.<br/>**/securelist**<br/>Especifica que as transferências de zona são concedidas somente à lista de servidores. Esse parâmetro deve ser seguido por um endereço IP ou endereços que o servidor mestre usa.<br/>**<SecurityIPaddresses>**<br/>lista os endereços IP que recebem transferências de zona do servidor mestre. Esse parâmetro é usado somente com o parâmetro **/Securelist** .<br/>**/nonotify | /Notify | /NotifyList <NotifyIPaddresses>**<br/>Especifica que uma notificação de alteração é enviada somente para determinados servidores secundários:<br/>**/nonotify**<br/>Especifica que nenhuma notificação de alteração é enviada aos servidores secundários.<br/>**/notify**<br/>Especifica que as notificações de alteração são enviadas para todos os servidores secundários.<br/>**/notifylist**<br/>Especifica que as notificações de alteração são enviadas somente para a lista de servidores. Esse comando deve ser seguido por um endereço IP ou endereços que o servidor mestre usa.<br/>**<NotifyIPaddresses>**<br/>Especifica o endereço IP ou os endereços do servidor secundário ou servidores para os quais as notificações de alteração são enviadas. Essa lista é usada somente com o parâmetro **/NotifyList** .<br/># # # # Comentários<br/>-Use o comando **zoneresetsecondaries** no servidor mestre para especificar como ele responde a solicitações de transferência de zona de servidores secundários.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /noxfr /nonotify  
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /securelist 11.0.0.2</pre><br/>### <a name="BKMK_29"></a>dnscmd/zoneresettype<br/>altera o tipo da zona.<br/># # # # Sintaxe<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresettype &lt;ZoneName&gt; &lt;Zonetype&gt; [/overwrite_mem | /overwrite_ds]</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pela sintaxe do computador local, endereço IP, FQDN ou nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Identifica a zona na qual o tipo será alterado.<br/>**<Zonetype>**<br/>Especifica o tipo de zona a ser criada. Cada tipo tem diferentes parâmetros necessários:<br/>**/dsprimary**<br/>Cria uma zona integrada do Active Directory.<br/>**/Primary/File <FileName>**<br/>Cria uma zona primária padrão.<br/>**/Secondary <MasterIPaddress> [, <MasterIPaddress>...]**<br/>Cria uma zona secundária padrão.<br/>**/stub <MasterIPaddress> [, <MasterIPaddress>...]/file <FileName>**<br/>Cria uma zona de stub com backup em arquivo.<br/>**/DsStub <MasterIPaddress> [, <MasterIPaddress>...]**<br/>Cria uma zona de stub integrada do Active Directory.<br/>**/forwarder &lt;MasterIPaddress [, <MasterIPaddress>].../File @ no__t-3**<br/>Especifica que a zona criada encaminha consultas não resolvidas para outro servidor DNS.<br/>**/dsforwarder**<br/>Especifica que a zona integrada do Active Directory criada encaminha consultas não resolvidas para outro servidor DNS.<br/>**/OverWrite_Mem | /overwrite_ds**<br/>Especifica como substituir os dados existentes:<br/>**/overwrite_mem**<br/>Substitui dados DNS de dados em AD DS.<br/>**/overwrite_ds**<br/>Substitui os dados existentes no AD DS.<br/># # # # Comentários<br/>-Definir o tipo de zona como **/DsForwarder** cria uma zona que executa o encaminhamento condicional.<br/># # # # Uso de amostra<br/><pre>dnscmd dnssvr1.contoso.com /zoneresettype test.contoso.com /primary /file test.contoso.com.dns  
dnscmd dnssvr1.contoso.com /zoneresettype second.contoso.com /secondary 10.0.0.2</pre><br/>### <a name="BKMK_35"></a>dnscmd/zoneresume<br/>inicia uma zona especificada que foi pausada anteriormente.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zoneresume &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser retomada.<br/># # # # Comentários<br/>-Você pode usar essa operação para reverter a operação <a href="#BKMK_27" data-raw-source="[zonepause](#BKMK_27)">zonepause</a> .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zoneresume test.contoso.com</code><br/>### <a name="BKMK_36"></a>dnscmd/zoneupdatefromds<br/>Atualiza a zona integrada do Active Directory especificada do AD DS.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zoneupdatefromds &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser atualizada.<br/># # # # Comentários<br/>-as zonas integradas do Active Directory executam essa atualização por padrão a cada cinco minutos. Para alterar esse parâmetro, use o comando **dnscmd config dspollinginterval** .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zoneupdatefromds</code><br/>### <a name="BKMK_37"></a>dnscmd/zonewriteback<br/>Verifica a memória do servidor DNS em busca de alterações que sejam relevantes para uma zona especificada e as grava no armazenamento persistente.<br/># # # # Sintaxe<br/><code>dnscmd &lt;ServerName&gt; /zonewriteback &lt;ZoneName&gt;</code><br/># # # # Parâmetros<br/>**<ServerName>**<br/>Especifica o servidor DNS a ser gerenciado, representado pelo endereço IP, pelo FQDN ou pelo nome do host. Se esse parâmetro for omitido, o servidor local será usado.<br/>**<ZoneName>**<br/>Especifica o nome da zona a ser atualizada.<br/># # # # Comentários<br/>-Essa é uma operação em nível de zona. Você pode atualizar todas as zonas em um servidor DNS com a operação <a href="#BKMK_21" data-raw-source="[writebackfiles](#BKMK_21)">writebackfiles</a> .<br/># # # # Uso de amostra<br/><code>dnscmd dnssvr1.contoso.com /zonewriteback test.contoso.com</code>  
