---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: Alternativas ao comprometimento
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 916bffd4f83e5c72816035542772342010e1a67c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59874477"
---
# <a name="avenues-to-compromise"></a>Alternativas ao comprometimento

>Aplica-se a: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Lei número sete: A rede mais segura é bem administrada.* - [10 leis imutáveis da segurança de administração](https://technet.microsoft.com/library/cc722488.aspx)  
  
Em organizações que já tenham sido eventos catastróficos comprometimento, avaliações geralmente revelam que as organizações têm limitado visibilidade sobre o estado real de suas infra-estruturas de TI, que pode diferir significativamente das suas "conforme documentado" estados. Essas variações introduzem vulnerabilidades que expõem o ambiente de comprometimento, geralmente com pouco risco de descoberta até que o comprometimento progrediu até o ponto em que os invasores efetivamente "proprietário" do ambiente.  
  
Listas de controle (ACLs) de acesso de avaliações detalhadas de configuração do AD DS essas organizações, infraestruturas de chave pública (PKI), servidores, estações de trabalho, aplicativos, e outras tecnologias revelam vulnerabilidades e configurações incorretas que, se corrigidas, poderia ter evitado o comprometimento inicial.  
  
Análise de documentação do IT, processos e procedimentos identifica vulnerabilidades introduzidas por lacunas na práticas administrativas foram aproveitadas por invasores para, eventualmente, obter privilégios que foram usados para comprometer totalmente a floresta do Active Directory. Uma floresta totalmente comprometida é aquele em que os invasores comprometem não apenas sistemas individuais, aplicativos ou contas de usuário, mas escalonar o acesso para obter um nível de privilégio em que pode modificar ou destruir todos os aspectos da floresta. Quando uma instalação do Active Directory tiver sido comprometida para que grau, os invasores podem fazer alterações que lhes permitem manter uma presença em todo o ambiente, ou pior, destruir o diretório e os sistemas e as contas que ele gerencia.  
  
Embora um número das vulnerabilidades comumente exploradas nas descrições a seguir não é ataques contra o Active Directory, eles permitem que os invasores estabelecer uma base em um ambiente que pode ser usado para executar a elevação de privilégios (também chamada de privilégio elevação) ataques e para, eventualmente, destino e comprometer o AD DS.  
  
Esta seção deste documento se concentra em que descreve os mecanismos que os invasores geralmente usam para acessar a infraestrutura e, eventualmente, para iniciar ataques de elevação de privilégio. Também consulte as seções a seguir:  
  
-   [Reduzindo a superfície de ataque do Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) recomendações detalhadas para a configuração segura do Active Directory.  
  
-   [Monitoramento do Active Directory para sinais de comprometer](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) recomendações para ajudar a detectar o comprometimento  
  
-   [Planejar para comprometimento](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) abordagens de alto nível para ajudar a se preparar para ataques contra a infraestrutura de IT e perspectivas de negócios  
  
> [!NOTE]  
> Embora este documento se concentra nos sistemas do Active Directory e o Windows que fazem parte de um domínio AD DS, os invasores raramente se concentrar apenas no Active Directory e o Windows. Em ambientes com uma mistura de diretórios, sistemas operacionais, aplicativos e repositórios de dados, é comum encontrar sistemas não Windows também tem sido comprometidos. Isso é especialmente verdadeiro se os sistemas fornecem uma "ponte" entre o Windows e ambientes de não-Windows, como servidores de arquivos acessados por clientes Windows e UNIX ou Linux, os diretórios que fornecem serviços de autenticação para vários sistemas operacionais, ou metadirectories que sincroniza dados entre diferentes diretórios.  
>   
> AD DS é direcionado por causa dos centralizado acesso e configuração de recursos de gerenciamento fornece não apenas aos sistemas Windows, mas também para outros clientes. Qualquer outro diretório ou aplicativo que fornece autenticação e a configuração de serviços de gerenciamento pode e serão o destino determinados invasores. Embora este documento se concentra em proteções que podem reduzir a probabilidade de um comprometimento das instalações do Active Directory, todas as organizações que inclua computadores não Windows, repositórios de diretórios, aplicativos ou dados também devem se preparar para ataques contra esses sistemas.  
  
## <a name="initial-breach-targets"></a>Destinos iniciais de violação  
Ninguém intencionalmente cria uma infra-estrutura de TI que expõe a organização para comprometer. Quando uma floresta do Active Directory é construída pela primeira vez, ele é normalmente original e atual. Como passam de anos e novos sistemas operacionais e aplicativos são adquiridos, eles são adicionados à floresta. Como os benefícios de capacidade de gerenciamento do Active Directory fornece são reconhecidos, mais conteúdo é adicionado ao diretório, mais pessoas integram seus computadores ou aplicativos com o AD DS e domínios são atualizados para dar suporte à nova funcionalidade oferecida por mais versões atuais do sistema operacional Windows. Além disso, o que acontece ao longo do tempo, no entanto, é que, até mesmo quando está sendo adicionada a uma nova infra-estrutura, outras partes da infraestrutura podem não ser mantidas, bem como eles foram inicialmente, sistemas e aplicativos estão funcionando corretamente e, portanto, não estão recebendo atenção e as organizações começam a se esqueça de que eles não têm eliminado sua infraestrutura herdada. Com base no que nós vemos na avaliação infra-estruturas comprometidas, o mais antigo, maior e mais complexo o ambiente, mais provável é que há diversas instâncias de vulnerabilidades comumente exploradas.  
  
Independentemente da motivação do invasor, a maioria das violações de segurança de informações começar com o comprometimento de um ou dois sistemas cada vez. Esses eventos inicias ou pontos de entrada na rede, muitas vezes aproveitam vulnerabilidades que poderiam ter sido corrigidas, mas não foram. O [2012 relatório de investigações de violação de dados (DBIR)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), que é um estudo anual produzido pela equipe de risco da Verizon em cooperação com um número de outras empresas e agências de segurança nacional, afirma que 96% de ataques de "não foram altamente difícil", e que" 97% de violações de podem ser evitados por meio de controles simples ou intermediários. " Essas descobertas podem ser uma consequência direta às vulnerabilidades comumente exploradas que seguem.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Lacunas em implantações de Antimalware e antivírus  
*Lei número oito: Um scanner de malware desatualizado é apenas um pouco melhor que nenhum scanner.* - [10 leis imutáveis de segurança (versão 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Análise de implantações de antivírus e antimalware organizações geral revela um ambiente em que a maioria das estações de trabalho são configurados com o software antivírus e antimalware habilitado e atual. As exceções são geralmente as estações de trabalho que se conectam com pouca frequência em dispositivos corporativos do ambiente ou funcionários, para qual antivírus e antimalware software pode ser difícil de implantar, configurar e atualizar.  
  
Populações de servidor, no entanto, tendem a ser que menos consistentemente protegidos em muitos ambientes comprometidos. Conforme relatado na [investigações de violação de dados de 2012](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf)compromete a 94% dos dados de todos os servidores envolvidos, que representa um aumento de 18% no ano anterior e incorporadas de 69% dos ataques de malware. Populações de servidor, não é incomum encontrar que instalações de antivírus e antimalware são configuradas de forma inconsistente, desatualizadas, configurada incorretamente ou até mesmo desabilitadas. Em alguns casos, o software antivírus e antimalware está desabilitado por equipe administrativa, mas em outros casos, os invasores desabilite o software depois de comprometer um servidor por meio de outras vulnerabilidades. Quando o software antivírus e antimalware está desabilitado, os invasores e em seguida, planeja malware no servidor e se concentrar em propagação de comprometimento em população do servidor.  
  
É importante não só para garantir que seus sistemas estejam protegidos com a proteção de malware atual e abrangente, mas também para monitorar os sistemas de desativação ou remoção de um software antivírus e antimalware e para reiniciar automaticamente a proteção quando ele estiver desativado manualmente. Embora nenhum software antivírus e antimalware pode garantir a prevenção e detecção de todas as infecções, uma implementação de antivírus e antimalware corretamente configurada e implantada pode reduzir a probabilidade de infecção.  
  
### <a name="incomplete-patching"></a>Aplicação de patch incompleta  
*Lei número três: Se você não manter atualizado com as correções de segurança, sua rede não é seu por muito tempo.* - [10 leis imutáveis da segurança de administração](https://technet.microsoft.com/library/cc722488.aspx)  
  
A Microsoft lança boletins de segurança na segunda terça-feira de cada mês, embora em raras ocasiões, as atualizações de segurança são lançadas entre as atualizações de segurança mensal (eles também são conhecidos como "out-of-band" atualizações) quando a vulnerabilidade é determinada por apresentar um risco urgente para sistemas de clientes. Se uma pequena empresa configura seus computadores Windows para usar o Windows Update para gerenciar o sistema e a aplicação de patches ou uma grande organização usa o software de gerenciamento, como o System Center Configuration Manager (SCCM) para implantar patches de acordo com a detalhadas, planos hierárquicos, muitos clientes patch suas infraestruturas do Windows de uma maneira relativamente em tempo hábil.  
  
No entanto, algumas infra-estruturas incluem somente os computadores Windows e aplicativos da Microsoft e em ambientes comprometidos, é comum encontrar a estratégia de gerenciamento de patches da organização contém lacunas. Sistemas Windows nesses ambientes inconsistentemente são corrigidos. Sistemas de operacionais do Windows não são corrigidos esporadicamente, senão absolutamente. Aplicativos comerciais de comercial (COTS) contenham vulnerabilidades para os quais patches existem, mas não foram aplicados. Normalmente, os dispositivos de rede são configurados com credenciais padrão de fábrica e anos após a instalação de atualizações de firmware não. Aplicativos e sistemas operacionais que não são mais suportados por seus fornecedores geralmente são mantidos em execução, apesar do fato de que eles não podem ser corrigidos contra vulnerabilidades. Cada um desses sistemas sem patch representa outro possível ponto de entrada para os invasores.  
  
O consumo de IT foi introduzidos desafios adicionais desse funcionário proprietária dispositivos estão sendo usados para acessar dados corporativos de propriedade e a organização não pode ter pouco ou nenhum controle sobre a aplicação de patch e a configuração de dispositivos pessoais de funcionários. Hardware de classe empresarial normalmente é fornecido com recursos de gerenciamento, às custas de menor preferência na seleção de personalização e dispositivos individual e opções de configuração prontos para empresas. Funcionário focada em hardware oferece uma variedade maior de fabricantes, fornecedores, recursos de segurança de hardware, recursos de segurança de software, recursos de gerenciamento e opções de configuração e muitos recursos da empresa podem estar totalmente ausentes.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Patch e Software de gerenciamento de vulnerabilidade  
Se for um sistema de gerenciamento eficaz de patches em vigor para os sistemas Windows e aplicativos da Microsoft, parte da superfície de ataque criar vulnerabilidades sem patch foi resolvido. No entanto, a menos que os sistemas não Windows, aplicativos não-Microsoft, infraestrutura de rede e dispositivos de funcionários também são mantidos atualizados sobre patches e outras correções, a infraestrutura permanece vulnerável. Em alguns casos, o fornecedor do aplicativo pode oferecer recursos de atualização automática; em outros, pode ser necessário planejar uma abordagem para recuperar e aplicar patches e outras correções de regularmente.
  
### <a name="outdated-applications-and-operating-systems"></a>Sistemas operacionais e aplicativos desatualizados  
*"Você não pode esperar que um sistema operacional de seis anos para proteção contra um ataque de seis de mês de idade."* -Profissional de segurança de informações com 10 anos de experiência de instalações de fixação enterprise  
  
Embora "obter atual, mantenha-se atualizado" pode parecer como criam uma frase de marketing, sistemas operacionais desatualizados e aplicativos do risco em muitas organizações infra-estruturas de TI. Um sistema operacional que foi lançado em 2003 pode ainda tem suporte pelo fornecedor e fornecido com as atualizações para lidar com vulnerabilidades, mas que o sistema operacional pode não conter recursos de segurança adicionados em versões mais recentes do sistema operacional. Sistemas desatualizados podem até exigir enfraquecer de determinada configuração de segurança do AD DS para dar suporte os recursos menor desses computadores.  
  
Aplicativos que foram escritos para usar protocolos de autenticação herdados por fornecedores que não dão suporte a aplicativo geralmente não podem ser alterados para dar suporte a mecanismos de autenticação mais fortes. No entanto, domínio do Active Directory de uma organização ainda pode ser configurado para armazenar hashes do LAN Manager ou senhas com criptografia reversível para dar suporte a esses aplicativos. Aplicativos gravados antes da introdução dos sistemas operacionais mais recentes podem não funcionar bem ou em sistemas operacionais atuais, exigir que as organizações mantenham sistemas mais e mais antigos e em alguns casos, completamente sem suporte de hardware e software.  
  
Mesmo nos casos em que as organizações atualizou seus controladores de domínio para o Windows Server 2012, Windows Server 2008 R2 ou Windows Server 2008, é comum encontrar partes significativas do membro da população do servidor esteja em execução no Windows Server 2003, Windows Server 2000 ou Windows NT Server 4.0 (que são completamente sem suporte). Quanto maior for uma organização mantém os sistemas de classificação por vencimento, mais a discrepância entre conjuntos de recursos cresce e maior a probabilidade de torna-se que os sistemas de produção não terão suportados. Além disso, quanto mais tempo uma floresta do Active Directory é mantida, mais que observamos que aplicativos e sistemas herdados não estão presentes em planos de atualização. Isso pode significar que um único computador executando um único aplicativo pode introduzir vulnerabilidades de domínio ou floresta porque o Active Directory está configurado para dar suporte a seus protocolos herdados e mecanismos de autenticação.  
  
Para eliminar os aplicativos e sistemas herdados, você deve primeiro se concentrar na identificação e catalogação-las e sobre como determinar se deseja atualizar ou substituir o aplicativo ou o host. Embora seja difícil encontrar as substituições para aplicativos altamente especializados para os quais há suporte nem um caminho de atualização, você poderá aproveitar um conceito chamado "destruição creative" para substituir o aplicativo herdado por um novo aplicativo que fornece a funcionalidade necessária. [Planejar para comprometimento](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) é descrita mais detalhadamente em "Planejando para comprometimento" neste documento.  
  
### <a name="misconfiguration"></a>configuração incorreta  
*Lei número quatro: Ele não faz muita diferença para instalar as correções de segurança em um computador que nunca tenha sido protegido para começar.* - [10 leis imutáveis da segurança de administração](https://technet.microsoft.com/library/cc722488.aspx)  
  
Mesmo em ambientes em que sistemas geralmente são mantidos atuais e corrigidas, podemos comumente identificar lacunas ou configurações incorretas no sistema operacional, aplicativos em execução em computadores e o Active Directory. Algumas configurações incorretas expõem apenas do computador local para comprometer, mas depois que um computador é "proprietário", os invasores geralmente se concentrar em propagar mais o comprometimento em todos os outros sistemas e, eventualmente, ao Active Directory. A seguir estão algumas das áreas comuns em que podemos identificar configurações que apresentam riscos.  
  
#### <a name="in-active-directory"></a>No Active Directory  
As contas no Active Directory que são mais comumente alvo de invasores são aqueles que são membros dos grupos de mais altamente privilegiados, como os membros do Admins. do domínio (DA), os administradores Enterprise (EA) ou grupos internos de administradores (BA) no Active Directory Diretório. A associação desses grupos deve ser reduzida para o menor número possível de contas para que a superfície de ataque desses grupos é limitada. Também é possível eliminar "permanente" associação nesses grupos privilegiados; ou seja, você pode implementar as configurações que permitem que você preencher temporariamente esses grupos somente quando seus privilégios de domínio e floresta são necessárias. Quando contas altamente privilegiadas são usadas, eles devem ser usados apenas em sistemas de seguros, designados como controladores de domínio ou hosts administrativos seguros. Informações detalhadas para ajudar a implementar todas essas configurações são fornecidas em [reduzindo a superfície de ataque do Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
Quando avaliamos a associação de grupos privilegiados mais altos no Active Directory, normalmente achamos associação excessiva em todas as três dos grupos mais privilegiado. Em alguns casos, as organizações tem dezenas, até mesmo centenas de contas DA grupos. Em outros casos, as organizações colocar contas diretamente em grupos de administradores internos, pensando que o grupo é "menos privilégios" do grupo DAs. Não é. Geralmente, encontramos alguns membros permanentes do grupo EA no domínio raiz da floresta, apesar do fato de que os privilégios EA raramente são necessários e temporariamente. Localizando o diário de contas administrativas do usuário de TI em todos os três grupos também é comum, mesmo que essa é uma configuração com redundância de forma eficaz. Conforme descrito em [reduzindo a superfície de ataque do Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), se uma conta é um membro permanente de um desses grupos ou todos eles, a conta pode ser usada para comprometer e até mesmo destruir o ambiente do AD DS e os sistemas e contas gerenciadas por ele. Recomendações para a configuração de segurança e o uso de contas privilegiadas no Active Directory são fornecidas nos [reduzindo a superfície de ataque do Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
#### <a name="on-domain-controllers"></a>Em controladores de domínio  
Quando avaliamos controladores de domínio, descobrimos muitas vezes encontrá-los, configurado e gerenciado não diferente dos servidores membro o. Controladores de domínio, às vezes, executam os mesmos aplicativos e utilitários instalados em servidores membros, não porque eles são necessários nos controladores de domínio, mas como os aplicativos fazem parte de uma compilação padrão. Esses aplicativos podem fornecer funcionalidade mínima nos controladores de domínio, mas aumentar significativamente a superfície de ataque, exigindo a definição de configuração que abrir portas, criar contas de serviço com alto privilégio ou conceder acesso ao sistema por usuários que não deve conectar a um controlador de domínio para qualquer finalidade que não seja a autenticação e a aplicação da diretiva de grupo. Em algumas violações, os invasores tem usado as ferramentas que já foram instaladas em controladores de domínio não apenas para obter acesso aos controladores de domínio, mas para modificar ou danificar o banco de dados do AD DS.  
  
Quando podemos extrair as definições de configuração do Internet Explorer em controladores de domínio, descobrimos que os usuários fizeram logon com contas que têm altos níveis de privilégio no Active Directory e usaram as contas para acessar a Internet e intranet do domínio controladores. Em alguns casos, as contas configurou as configurações do Internet Explorer nos controladores de domínio para permitir o download da Internet conteúdo e utilitários freeware foram baixados de sites da Internet e instalados nos controladores de domínio. A configuração de segurança reforçada do Internet Explorer está habilitada para usuários e administradores por padrão, ainda que muitas vezes observamos que é foi desabilitada para os administradores. Quando uma conta altamente privilegiada pode acessar a Internet e baixa o conteúdo em qualquer computador, esse computador é colocar em risco grave. Quando o computador é um controlador de domínio, toda a instalação do AD DS é colocar em risco.  
  
##### <a name="protecting-domain-controllers"></a>Protegendo controladores de domínio  
Controladores de domínio devem ser tratados como componentes de infraestrutura crítica, protegidos de forma mais rigorosa e configurados mais rigidamente do que o arquivo, impressão e servidores de aplicativos. Controladores de domínio não devem executar qualquer software que não é necessária para o controlador de domínio para a função ou não protege contra ataques, o controlador de domínio. Controladores de domínio não devem ter permissão para acessar a Internet e as configurações de segurança devem ser configuradas e impostas por objetos de diretiva de grupo (GPOs). Recomendações detalhadas para a instalação segura, configuração e gerenciamento de controladores de domínio são fornecidas nos [Protegendo controladores de domínio contra ataque](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>Dentro do sistema operacional  
*Lei número dois: Se uma pessoa mal-intencionada conseguir alterar o sistema operacional em seu computador, ele não é o computador mais.* - [10 leis imutáveis de segurança (versão 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Embora algumas organizações criar configurações de linha de base para os servidores de diferentes tipos e permitem a personalização limitada do sistema operacional após a instalação, análise de ambientes comprometidos muitas vezes revela grandes números de servidores implantados em um modo ad hoc e configurado manualmente e independente. As configurações entre dois servidores que executam a mesma função podem ser completamente diferentes, em que nenhum servidor está configurado com segurança. Por outro lado, as linhas de base de configuração de servidor podem ser aplicadas de maneira consistente, mas também consistentemente configurado incorretamente; ou seja, os servidores são configurados de forma que cria a mesma vulnerabilidade em todos os servidores de um determinado tipo. Erro de configuração inclui práticas recomendadas como desabilitar recursos de segurança, concedendo direitos em excesso e permissões para contas (especialmente contas de serviço), uso de credenciais locais idênticas em sistemas e autorizações de instalação do aplicativos não autorizados e utilitários que criam vulnerabilidades de seus próprios.  
  
##### <a name="disabling-security-features"></a>Desabilitar os recursos de segurança  
As organizações às vezes, desabilitar Firewall do Windows com segurança avançada (WFAS) fora crença de que o WFAS é difícil configurar ou requer a configuração de trabalho intensiva. No entanto, começando com o Windows Server 2008, quando qualquer função ou recurso é instalado em um servidor, ele é configurado por padrão com os privilégios mínimos necessários para a função ou recurso de função e o Firewall do Windows é configurado automaticamente para dar suporte a função ou um recurso. Desabilitando o WFAS (e não usando outro firewall baseado em host em seu lugar), as organizações aumentar a superfície de ataque de todo o ambiente do Windows. Firewalls de perímetro fornecem proteção contra ataques que se destinam diretamente a um ambiente da Internet, mas eles fornecem nenhuma proteção contra ataques que exploram outros vetores de ataque, como [download drive-by](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) ataques, ou ataques originados de outros sistemas comprometidos na intranet.  
  
Configurações de controle de conta (UAC) do usuário, às vezes, estão desabilitadas nos servidores porque equipe administrativa encontrar os prompts intrusiva. Embora [artigo do Microsoft Support 2526083](https://support.microsoft.com/kb/2526083) descreve os cenários em que o UAC pode ser desabilitado no Windows Server, a menos que você estiver executando um servidor de instalação de núcleo (em que o UAC está desabilitado por padrão), você não deve desabilitar o UAC em servidores sem uma consideração muito cuidadosa e pesquisa.  
  
Em outros casos, as configurações do servidor são configuradas para menos seguras valores porque as organizações aplicam definições de configuração de servidor desatualizado para novos sistemas operacionais, como a aplicação de linhas de base do Windows Server 2003 para computadores que executam o Windows Server 2012, Windows Server 2008 R2 ou Windows Server 2008, sem alterar as linhas de base para refletir as alterações no sistema operacional. Em vez de executar linhas de base de servidor antigos para novos sistemas operacionais, ao implantar um novo sistema operacional, examine as alterações de segurança e definições de configuração para garantir que as configurações implementadas são aplicáveis e apropriada para o novo sistema operacional.  
  
##### <a name="granting-excessive-privilege"></a>Concedendo privilégios excessivos  
Em quase todos os ambientes que podemos ter avaliado, o privilégio excessivo é concedido para contas locais e baseados em domínio em sistemas Windows. Os usuários recebem direitos de administrador local nas estações de trabalho, servidores membros que executam serviços que são configurados com direitos além do que eles precisam para funcionar, e grupos de administradores locais em toda a população do servidor contém dezenas ou até mesmo centenas de contas locais e de domínio. Comprometimento de apenas uma conta com privilégios em um computador permite que os invasores de comprometer as contas de cada usuário e o serviço que faça logon no computador e às credenciais de coleta e aproveite para propagar o comprometimento para outros sistemas.  
  
Embora pass-the-hash (PTH) e outros ataques de roubo de credencial são onipresentes hoje em dia, é porque não há ferramentas disponíveis gratuitamente que torna simples e fácil extrair as credenciais de outras contas com privilégios quando um invasor tenha obtido do administrador- ou o acesso de nível de sistema a um computador. Mesmo sem as ferramentas que permite a coleta de credenciais de sessões de logon, um invasor com acesso privilegiado em um computador pode facilmente instalar agentes de pressionamento de tecla que capturam pressionamentos de tecla, capturas de tela e conteúdo da área de transferência. Um invasor com acesso privilegiado em um computador pode desabilitar o software antimalware, rootkits de instalar, modificar arquivos protegidos ou instalar software mal-intencionado no computador que automatiza a ataques ou ativa a um servidor em uma [download drive-by](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) host.  
  
Variam as táticas usadas para estender uma violação, além de um único computador, mas a chave para propagar o comprometimento é a aquisição de acesso privilegiado aos sistemas adicionais. Reduzindo o número de contas com acesso privilegiado para qualquer sistema, é reduzir a superfície de ataque não apenas do computador, mas a probabilidade de um invasor que coleta credenciais valiosas do computador.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Padronização de credenciais de Administrador Local  
Longa houve debate entre especialistas de segurança à se houver valor na renomeação de contas de administrador locais nos computadores Windows. O que é realmente importante sobre contas de administrador locais é se eles são configurados com o mesmo nome de usuário e senha em vários computadores.  
  
Se a conta de administrador local for chamada com o mesmo valor em servidores e a senha atribuída à conta também é configurada com o mesmo valor, os invasores podem extrair as credenciais da conta em um computador no qual acesso de administrador ou o nível de sistema foi obtido. O invasor não tem inicialmente comprometer a conta de administrador; eles só precisam comprometer a conta de um usuário que seja membro do grupo Administradores local ou de uma conta de serviço que está configurada para ser executado como LocalSystem ou com privilégios de administrador. Em seguida, o invasor pode extrair as credenciais da conta de administrador e repetir essas credenciais em logons de rede para outros computadores na rede.  
  
Desde que o outro computador tem uma conta local com o mesmo nome de usuário e senha (ou hash de senha) como as credenciais da conta que estão sendo apresentadas, a tentativa de logon é bem-sucedida e o invasor obtém acesso privilegiado ao computador de destino. Nas versões atuais do Windows, é a conta de administrador interna [desabilitada por padrão](https://technet.microsoft.com/library/cc753450.aspx), mas em sistemas operacionais herdados, a conta está habilitada por padrão.  
  
> [!NOTE]  
> Algumas organizações intencionalmente configurou as contas de administrador locais esteja habilitado na crença de que isso fornece uma "à prova de falhas", no caso de todas as outras contas privilegiadas estão bloqueadas de um sistema. No entanto, mesmo se a conta de administrador local está desabilitada e não há nenhuma outra conta disponível que pode habilitar a conta ou faça logon no sistema com privilégios de administrador, o sistema pode ser inicializado no modo de segurança e o administrador local interna conta pode ser habilitada novamente, conforme descrito em [artigo do Microsoft Support 814777](https://support.microsoft.com/kb/814777). Além disso, se ainda com êxito, o sistema aplica GPOs, um GPO pode ser modificado para reativar a conta de administrador (temporariamente) ou grupos restritos podem ser configurados para adicionar uma conta de domínio ao grupo Administradores local. Reparos podem ser executados e a conta de administrador novamente pode ser desabilitada. Para impedir efetivamente um comprometimento lateral que usa credenciais de conta de administrador locais internas, senhas e nomes de usuário exclusivo devem ser configuradas para contas de administrador locais. Para implantar senhas exclusivas para contas de administrador locais por meio de um GPO, consulte [solução de gerenciamento de senha da conta administrador interna por meio do GPO de](https://technet.microsoft.com/mt227395.aspx) no technet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Permitir instalação de aplicativos não autorizados  
*Lei número um: Se uma pessoa mal-intencionada conseguir persuadi-lo a executar um programa em seu computador, ele não é exclusivamente o computador mais.* - [10 leis imutáveis de segurança (versão 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Se uma organização implanta configurações de linha de base consistente entre servidores, a instalação de aplicativos que não fazem parte da função definida de um servidor não deve ter permissão. Ao permitir que o software seja instalado que não faz parte da funcionalidade de um servidor designado, os servidores são expostos à instalação inadvertida ou mal-intencionada de software que aumenta a superfície de ataque do servidor, apresenta a vulnerabilidades de aplicativos ou faz com que instabilidade do sistema.  
  
#### <a name="applications"></a>Aplicativos  
Conforme descrito anteriormente, aplicativos geralmente são instalados e configurados para usar as contas que são concedidas, na verdade, requer mais privilégios do que o aplicativo. Em alguns casos, a documentação do aplicativo especifica que as contas de serviço devem ser membros do grupo de administradores do servidor local ou devem ser configuradas para ser executado no contexto do LocalSystem. Isso geralmente é não, porque o aplicativo requer esses direitos, mas como determinar quais direitos e permissões de necessidade de contas de serviço do aplicativo requer o investimento em mais tempo e esforço. Se não instalar um aplicativo com os privilégios mínimos necessários para o aplicativo e seus recursos configurados funcionar, o sistema é exposto a ataques que aproveitam os privilégios do aplicativo sem qualquer ataque contra o próprio sistema operacional.  
  
### <a name="lack-of-secure-application-development-practices"></a>Falta de práticas de desenvolvimento de aplicativo seguro  
Infraestrutura existe para dar suporte a cargas de trabalho. Sempre que essas cargas de trabalho são implementadas em aplicativos personalizados, é essencial para garantir que os aplicativos desenvolvidos usando as práticas recomendadas seguras. Análise da causa raiz dos incidentes de toda a empresa geral revela que um comprometimento inicial é afetado por meio de personalizado aplicativos-especialmente aqueles que são Internet voltada para. A maioria desses acordos é realizada por meio de comprometimento de ataques conhecidos, como injeção de SQL (SQLi) e ataques de script de entre sites (XSS).  
  
Injeção de SQL é uma vulnerabilidade do aplicativo que permite a entrada definida pelo usuário modificar uma instrução SQL que é passada para o banco de dados para execução. Essa entrada pode ser fornecida por meio de um campo no aplicativo, um parâmetro (como a cadeia de caracteres de consulta ou um cookie) ou outros métodos. O resultado dessa injeção é que a instrução SQL fornecida para o banco de dados é fundamentalmente diferente do que o desenvolvedor destinado. Veja, por exemplo, uma consulta comum usada na avaliação de uma combinação de nome/senha de usuário:  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Quando isso é recebido pelo servidor de banco de dados, ele instrui o servidor para procurar por meio da tabela de usuários e retornar qualquer registro de ID de usuário onde o nome de usuário e senha correspondem aos fornecidos pelo usuário (supostamente por meio de um formulário de logon de algum tipo). Naturalmente a intenção do desenvolvedor nesse caso é retornar apenas um registro válido, se um nome de usuário correto e a senha podem ser fornecidos pelo usuário. Se um deles estiver incorreto, o servidor de banco de dados será possível encontrar um registro correspondente e retornar um resultado vazio.  
  
O problema ocorre quando um invasor faz algo inesperado, como fornecer seu próprio SQL em vez de dados válido. Como o SQL é interpretado em dinamicamente pelo servidor de banco de dados, o código injetado seria processado como se o desenvolvedor tinha colocá-lo em si. Por exemplo, se o invasor digitada **administrator** para a ID de usuário e **xyz** ou **1 = 1** como a senha, a instrução resultante processada pelo banco de dados seria:  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Quando essa consulta é processada pelo servidor de banco de dados, todas as linhas na tabela serão retornadas na consulta porque 1 = 1 será sempre avaliada como True, portanto, não importa se o nome de usuário correto e a senha for conhecido ou fornecido. O resultado na maioria dos casos é que o usuário será registrado como o primeiro usuário no banco de dados do usuário; Na maioria dos casos, isso será o usuário administrativo.  
  
Além de simplesmente efetuando logon, instruções de SQL malformadas, como isso pode ser usado para adicionar, excluir, alterar dados ou até mesmo remover tabelas inteiras de (excluir) de um banco de dados. Nos casos mais extremos em que SQLi é combinado com privilégios excessivos, comandos do sistema operacional podem ser executados para permitir a criação de novos usuários, para baixar as ferramentas de ataque ou para executar outras ações dos invasores.  
  
No script entre sites, a vulnerabilidade é introduzida na saída do aplicativo. Um ataque começa com um invasor que fornece dados malformados ao aplicativo, mas nesse caso, os dados malformados estão na forma de código de script (como JavaScript) que será executada pelo navegador da vítima. Exploração de uma vulnerabilidade XSS pode permitir que um invasor executar todas as funções de aplicativo de destino no contexto do usuário que iniciou o navegador. Ataques de XSS normalmente são iniciados por um email de phishing incentivar o usuário clicar em um link que conecta o aplicativo e executa o código de ataque.  
  
XSS geralmente é explorado em cenários de comércio eletrônico em que um invasor pode fazer compras ou transferir dinheiro no contexto do usuário explorado e serviços bancários online. No caso de um ataque direcionado em um aplicativo de gerenciamento de identidade personalizado baseado na web, ele pode permitir que um invasor crie suas próprias identidades, modificar permissões e direitos e levar ao comprometimento sistêmico.  
  
Embora uma discussão completa sobre o XSS e injeção de SQL está fora do escopo deste documento, o [Open Web Application Security OWASP (projeto)](https://www.owasp.org/index.php/Main_Page) publica uma lista de 10 principais com uma discussão aprofundada das vulnerabilidades e contramedidas.  
  
Independentemente do investimento em segurança de infraestrutura, se mal criados e escritos aplicativos são implantados dentro dessa infra-estrutura, o ambiente será feito vulnerável a ataques. Ainda bem protegidas infra-estruturas geralmente não podem fornecer contramedidas eficientes para esses ataques de aplicativo. Ampliando o problema, design inadequado aplicativos podem exigir que as contas de serviço receber excesso de permissões para o aplicativo funcione.  
  
O Microsoft Security Development Lifecycle (SDL) é um conjunto de controles de processo estruturais que trabalham para melhorar o início de segurança no início do requisitos de coleta e estendendo por ciclo de vida do aplicativo até que ele seja encerrado. Essa integração de controles de segurança em vigor apenas não é essencial de uma perspectiva de segurança, é essencial para garantir que a segurança de aplicativos é o custo e agendar em vigor. Avaliar um aplicativo para problemas de segurança quando ele é efetivamente o código completo exige que as empresas a tomar decisões sobre a segurança de aplicativo apenas antes ou até mesmo depois que o aplicativo foi implantado. Uma organização pode optar por tratar as falhas do aplicativo antes de implantar o aplicativo em produção, incorrendo em custos e atrasos, ou o aplicativo pode ser implantado em produção com falhas de segurança conhecidas, expondo a organização para comprometer.  
  
Algumas organizações coloque o custo total de correção de um problema de segurança no código acima de US $10.000 por um problema de produção e aplicativos desenvolvidos sem um SDL efetivo calcular a média de mais de dez problemas de alta gravidade por 100.000 linhas de código. Em aplicativos grandes, os custos de escalonar rapidamente. Por outro lado, muitas empresas definir um parâmetro de comparação menor que um problema por 100.000 linhas de código no estágio de revisão de código final do SDL e tenha como objetivo zero problemas em aplicativos de alto risco em produção.  
  
Implementação do SDL aprimora a segurança, incluindo requisitos de segurança no início na coleta de requisitos e design de um aplicativo fornece a modelagem de risco para aplicativos de alto risco. requer treinamento efetivo e o monitoramento de desenvolvedores; e claro, requer práticas e padrões de código consistente. O efeito líquido de um SDL é aprimoramentos significativos na segurança do aplicativo, reduzindo o custo de desenvolver, implantar, manter e encerrar um aplicativo. Embora uma discussão detalhada sobre o design e implementação do SDL estão além do escopo deste documento, consulte o [Microsoft Security Development Lifecycle](https://www.microsoft.com/security/sdl/default.aspx) para obter orientações detalhadas e informações.  
  


